<html>
<head>
    <link rel='stylesheet' href='spectrum.css' />
    <style>
        #picked {
            width: 50px;
            height: 50px;
            border: 1px solid #000;
        }

        #left {
            float: left;
        }

        #results {
            float: left;
            margin-left: 10px;
        }

        body {
            font-family: sans-serif;
        }

        li {
            padding: 5px;
        }

        ul {
            list-style: none;
            padding-left: 0px;
        }
    </style>
</head>
<body>
    <div id="left">
        <input type="text" id="picker"></input>
        <br />
        You picked:
        <div id="picked"></div>
    </div>

    <div id="results">Cool names:
        <ul></ul>
    </div>
    <script src="../jquery-1.7.2.min.js"></script>
    <script src="../../kdTree.js"></script>
    <script src="spectrum.js"></script>
    <script>
        var tree;
        var colors = [{ "title": "Alice Blue", "hex": "#F0F8FF" }, { "title": "Antique White", "hex": "#FAEBD7" }, { "title": "Aqua", "hex": "#00FFFF" }, { "title": "Aquamarine", "hex": "#7FFFD4" }, { "title": "Azure", "hex": "#F0FFFF" }, { "title": "Beige", "hex": "#F5F5DC" }, { "title": "Bisque", "hex": "#FFE4C4" }, { "title": "Black", "hex": "#000000" }, { "title": "Blanched Almond", "hex": "#FFEBCD" }, { "title": "Blue", "hex": "#0000FF" }, { "title": "Blue Violet", "hex": "#8A2BE2" }, { "title": "Brown", "hex": "#A52A2A" }, { "title": "Burlywood", "hex": "#DEB887" }, { "title": "Cadet Blue", "hex": "#5F9EA0" }, { "title": "Chartreuse", "hex": "#7FFF00" }, { "title": "Chocolate", "hex": "#D2691E" }, { "title": "Coral", "hex": "#FF7F50" }, { "title": "Cornflower", "hex": "#6495ED" }, { "title": "Cornsilk", "hex": "#FFF8DC" }, { "title": "Crimson", "hex": "#DC143C" }, { "title": "Cyan", "hex": "#00FFFF" }, { "title": "Dark Blue", "hex": "#00008B" }, { "title": "Dark Cyan", "hex": "#008B8B" }, { "title": "Dark Goldenrod", "hex": "#B8860B" }, { "title": "Dark Gray", "hex": "#A9A9A9" }, { "title": "Dark Green", "hex": "#006400" }, { "title": "Dark Khaki", "hex": "#BDB76B" }, { "title": "Dark Magenta", "hex": "#8B008B" }, { "title": "Dark Olive Green", "hex": "#556B2F" }, { "title": "Dark Orange", "hex": "#FF8C00" }, { "title": "Dark Orchid", "hex": "#9932CC" }, { "title": "Dark Red", "hex": "#8B0000" }, { "title": "Dark Salmon", "hex": "#E9967A" }, { "title": "Dark Sea Green", "hex": "#8FBC8F" }, { "title": "Dark Slate Blue", "hex": "#483D8B" }, { "title": "Dark Slate Gray", "hex": "#2F4F4F" }, { "title": "Dark Turquoise", "hex": "#00CED1" }, { "title": "Dark Violet", "hex": "#9400D3" }, { "title": "Deep Pink", "hex": "#FF1493" }, { "title": "Deep Sky Blue", "hex": "#00BFFF" }, { "title": "Dim Gray", "hex": "#696969" }, { "title": "Dodger Blue", "hex": "#1E90FF" }, { "title": "Firebrick", "hex": "#B22222" }, { "title": "Floral White", "hex": "#FFFAF0" }, { "title": "Forest Green", "hex": "#228B22" }, { "title": "Fuchsia", "hex": "#FF00FF" }, { "title": "Gainsboro", "hex": "#DCDCDC" }, { "title": "Ghost White", "hex": "#F8F8FF" }, { "title": "Gold", "hex": "#FFD700" }, { "title": "Goldenrod", "hex": "#DAA520" }, { "title": "Gray (X11)", "hex": "#BEBEBE" }, { "title": "Gray (W3C)", "hex": "#808080" }, { "title": "Green (X11)", "hex": "#00FF00" }, { "title": "Green (W3C)", "hex": "#008000" }, { "title": "Green Yellow", "hex": "#ADFF2F" }, { "title": "Honeydew", "hex": "#F0FFF0" }, { "title": "Hot Pink", "hex": "#FF69B4" }, { "title": "Indian Red", "hex": "#CD5C5C" }, { "title": "Indigo", "hex": "#4B0082" }, { "title": "Ivory", "hex": "#FFFFF0" }, { "title": "Khaki", "hex": "#F0E68C" }, { "title": "Lavender", "hex": "#E6E6FA" }, { "title": "Lavender Blush", "hex": "#FFF0F5" }, { "title": "Lawn Green", "hex": "#7CFC00" }, { "title": "Laser Lemon", "hex": "#FFFF54" }, { "title": "Lemon Chiffon", "hex": "#FFFACD" }, { "title": "Light Blue", "hex": "#ADD8E6" }, { "title": "Light Coral", "hex": "#F08080" }, { "title": "Light Cyan", "hex": "#E0FFFF" }, { "title": "Light Goldenrod", "hex": "#FAFAD2" }, { "title": "Light Gray", "hex": "#D3D3D3" }, { "title": "Light Green", "hex": "#90EE90" }, { "title": "Light Pink", "hex": "#FFB6C1" }, { "title": "Light Salmon", "hex": "#FFA07A" }, { "title": "Light Sea Green", "hex": "#20B2AA" }, { "title": "Light Sky Blue", "hex": "#87CEFA" }, { "title": "Light Slate Gray", "hex": "#778899" }, { "title": "Light Steel Blue", "hex": "#B0C4DE" }, { "title": "Light Yellow", "hex": "#FFFFE0" }, { "title": "Lime (W3C)", "hex": "#00FF00" }, { "title": "Lime Green", "hex": "#32CD32" }, { "title": "Linen", "hex": "#FAF0E6" }, { "title": "Magenta", "hex": "#FF00FF" }, { "title": "Maroon (X11)", "hex": "#B03060" }, { "title": "Maroon (W3C)", "hex": "#7F0000" }, { "title": "Medium Aquamarine", "hex": "#66CDAA" }, { "title": "Medium Blue", "hex": "#0000CD" }, { "title": "Medium Orchid", "hex": "#BA55D3" }, { "title": "Medium Purple", "hex": "#9370DB" }, { "title": "Medium Sea Green", "hex": "#3CB371" }, { "title": "Medium Slate Blue", "hex": "#7B68EE" }, { "title": "Medium Spring Green", "hex": "#00FA9A" }, { "title": "Medium Turquoise", "hex": "#48D1CC" }, { "title": "Medium Violet Red", "hex": "#C71585" }, { "title": "Midnight Blue", "hex": "#191970" }, { "title": "Mint Cream", "hex": "#F5FFFA" }, { "title": "Misty Rose", "hex": "#FFE4E1" }, { "title": "Moccasin", "hex": "#FFE4B5" }, { "title": "Navajo White", "hex": "#FFDEAD" }, { "title": "Navy", "hex": "#000080" }, { "title": "Old Lace", "hex": "#FDF5E6" }, { "title": "Olive", "hex": "#808000" }, { "title": "Olive Drab", "hex": "#6B8E23" }, { "title": "Orange", "hex": "#FFA500" }, { "title": "Orange Red", "hex": "#FF4500" }, { "title": "Orchid", "hex": "#DA70D6" }, { "title": "Pale Goldenrod", "hex": "#EEE8AA" }, { "title": "Pale Green", "hex": "#98FB98" }, { "title": "Pale Turquoise", "hex": "#AFEEEE" }, { "title": "Pale Violet Red", "hex": "#DB7093" }, { "title": "Papaya Whip", "hex": "#FFEFD5" }, { "title": "Peach Puff", "hex": "#FFDAB9" }, { "title": "Peru", "hex": "#CD853F" }, { "title": "Pink", "hex": "#FFC0CB" }, { "title": "Plum", "hex": "#DDA0DD" }, { "title": "Powder Blue", "hex": "#B0E0E6" }, { "title": "Purple (X11)", "hex": "#A020F0" }, { "title": "Purple (W3C)", "hex": "#7F007F" }, { "title": "Red", "hex": "#FF0000" }, { "title": "Rosy Brown", "hex": "#BC8F8F" }, { "title": "Royal Blue", "hex": "#4169E1" }, { "title": "Saddle Brown", "hex": "#8B4513" }, { "title": "Salmon", "hex": "#FA8072" }, { "title": "Sandy Brown", "hex": "#F4A460" }, { "title": "Sea Green", "hex": "#2E8B57" }, { "title": "Seashell", "hex": "#FFF5EE" }, { "title": "Sienna", "hex": "#A0522D" }, { "title": "Silver (W3C)", "hex": "#C0C0C0" }, { "title": "Sky Blue", "hex": "#87CEEB" }, { "title": "Slate Blue", "hex": "#6A5ACD" }, { "title": "Slate Gray", "hex": "#708090" }, { "title": "Snow", "hex": "#FFFAFA" }, { "title": "Spring Green", "hex": "#00FF7F" }, { "title": "Steel Blue", "hex": "#4682B4" }, { "title": "Tan", "hex": "#D2B48C" }, { "title": "Teal", "hex": "#008080" }, { "title": "Thistle", "hex": "#D8BFD8" }, { "title": "Tomato", "hex": "#FF6347" }, { "title": "Turquoise", "hex": "#40E0D0" }, { "title": "Violet", "hex": "#EE82EE" }, { "title": "Wheat", "hex": "#F5DEB3" }, { "title": "White", "hex": "#FFFFFF" }, { "title": "White Smoke", "hex": "#F5F5F5" }, { "title": "Yellow", "hex": "#FFFF00" }, { "title": "Yellow Green", "hex": "#9ACD32" }];

        // Pretty good color distance from
        // http://www.compuphase.com/cmetric.htm
        function colorDistance(a, b) {
            var dr = a.red - b.red;
            var dg = a.green - b.green;
            var db = a.blue - b.blue;
            var redMean = (a.red + b.red) / 2;
            return (2 + redMean / 256) * dr * dr + 4 * dg * dg + (2 + (255 - redMean) / 256) * db * db;
        }

        function update(color) {
            $("#picked").css('background', color.toHex());
            var rgb = color.toRgb();
            var search = { red: rgb.r, green: rgb.g, blue: rgb.b };
            var nearest = tree.nearest(search, 10);
            nearest.sort(function (a, b) { return a[1] - b[1] });



            var $list = $("#results ul");
            $list.html("");
            for (var i = 0; i < nearest.length; i++) {
                var c = nearest[i][0];

                var $box = $("<div>")
                  .css('background', c.hex)
                  .css('display', 'inline-block')
                  .css('margin-right', '10px')
                  .height('30px')
                  .width('30px');
                var $line = $("<li>").append($box).append(c.title);
                $list.append($line);
            }
        }



        $(function () {

            for (var i = 0; i < colors.length; i++) {
                var color = new tinycolor(colors[i].hex).toRgb();
                colors[i].red = color.r;
                colors[i].green = color.g;
                colors[i].blue = color.b;
            }
            tree = new kdTree(colors, colorDistance, ["red", "green", "blue"]);

            $("#picker").spectrum({
                flat: true,
                showInput: true,
                preferredFormat: "hex",
                move: update
            });
        });
    </script>
</body>
</html>
