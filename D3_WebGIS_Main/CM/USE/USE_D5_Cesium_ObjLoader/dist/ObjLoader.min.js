(function(){var e,n,r;(function(t){var i,a,o,s,u={},f={},l={},c={},d=Object.prototype.hasOwnProperty,v=[].slice,p=/\.js$/;function h(e,n){return d.call(e,n)}function m(e,n){var r,t,i,a,o,s,u,f,c,d,v,h,m=n&&n.split("/"),E=l.map,g=E&&E["*"]||{};if(e){e=e.split("/");o=e.length-1;if(l.nodeIdCompat&&p.test(e[o])){e[o]=e[o].replace(p,"")}if(e[0].charAt(0)==="."&&m){h=m.slice(0,m.length-1);e=h.concat(e)}for(c=0;c<e.length;c++){v=e[c];if(v==="."){e.splice(c,1);c-=1}else if(v===".."){if(c===0||c===1&&e[2]===".."||e[c-1]===".."){continue}else if(c>0){e.splice(c-1,2);c-=2}}}e=e.join("/")}if((m||g)&&E){r=e.split("/");for(c=r.length;c>0;c-=1){t=r.slice(0,c).join("/");if(m){for(d=m.length;d>0;d-=1){i=E[m.slice(0,d).join("/")];if(i){i=i[t];if(i){a=i;s=c;break}}}}if(a){break}if(!u&&g&&g[t]){u=g[t];f=c}}if(!a&&u){a=u;s=f}if(a){r.splice(0,s,a);e=r.join("/")}}return e}function E(e,n){return function(){var r=v.call(arguments,0);if(typeof r[0]!=="string"&&r.length===1){r.push(null)}return a.apply(t,r.concat([e,n]))}}function g(e){return function(n){return m(n,e)}}function _(e){return function(n){u[e]=n}}function b(e){if(h(f,e)){var n=f[e];delete f[e];c[e]=true;i.apply(t,n)}if(!h(u,e)&&!h(c,e)){throw new Error("No "+e)}return u[e]}function y(e){var n,r=e?e.indexOf("!"):-1;if(r>-1){n=e.substring(0,r);e=e.substring(r+1,e.length)}return[n,e]}function M(e){return e?y(e):[]}o=function(e,n){var r,t=y(e),i=t[0],a=n[1];e=t[1];if(i){i=m(i,a);r=b(i)}if(i){if(r&&r.normalize){e=r.normalize(e,g(a))}else{e=m(e,a)}}else{e=m(e,a);t=y(e);i=t[0];e=t[1];if(i){r=b(i)}}return{f:i?i+"!"+e:e,n:e,pr:i,p:r}};function I(e){return function(){return l&&l.config&&l.config[e]||{}}}s={require:function(e){return E(e)},exports:function(e){var n=u[e];if(typeof n!=="undefined"){return n}else{return u[e]={}}},module:function(e){return{id:e,uri:"",exports:u[e],config:I(e)}}};i=function(e,n,r,i){var a,l,d,v,p,m,g=[],y=typeof r,I;i=i||e;m=M(i);if(y==="undefined"||y==="function"){n=!n.length&&r.length?["require","exports","module"]:n;for(p=0;p<n.length;p+=1){v=o(n[p],m);l=v.f;if(l==="require"){g[p]=s.require(e)}else if(l==="exports"){g[p]=s.exports(e);I=true}else if(l==="module"){a=g[p]=s.module(e)}else if(h(u,l)||h(f,l)||h(c,l)){g[p]=b(l)}else if(v.p){v.p.load(v.n,E(i,true),_(l),{});g[p]=u[l]}else{throw new Error(e+" missing "+l)}}d=r?r.apply(u[e],g):undefined;if(e){if(a&&a.exports!==t&&a.exports!==u[e]){u[e]=a.exports}else if(d!==t||!I){u[e]=d}}}else if(e){u[e]=r}};e=n=a=function(e,n,r,u,f){if(typeof e==="string"){if(s[e]){return s[e](n)}return b(o(e,M(n)).f)}else if(!e.splice){l=e;if(l.deps){a(l.deps,l.callback)}if(!n){return}if(n.splice){e=n;n=r;r=null}else{e=t}}n=n||function(){};if(typeof r==="function"){r=u;u=f}if(u){i(t,e,n,r)}else{setTimeout(function(){i(t,e,n,r)},4)}return a};a.config=function(e){return a(e)};e._defined=u;r=function(e,n,r){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!n.splice){r=n;n=[]}if(!h(u,e)&&!h(f,e)){f[e]=[e,n,r]}};r.amd={jQuery:true}})();function t(){}t.GetExtension=function(e){var n=e.lastIndexOf(".");return e.substring(n,e.length)};t.GetFileName=function(e){var n=e.lastIndexOf("/");if(n<0){return e}return e.substring(n+1,e.length)};t.GetDirectoryName=function(e){var n=e.lastIndexOf("/");if(n<0){return""}return e.substring(0,n)};t.Combine=function(e,n){return e+n};t.ChangeExtension=function(e,n){return e.replace(t.GetExtension(e),n)};if(typeof module==="undefined"){this.Path=t}else{module.exports=t}if(typeof r==="function"){r("Util/Path",[],function(){return t})}(function(){var e=Math,n=e.pow,r=Array.prototype.slice,t=window,i=String.fromCharCode,a=/[^0-9a-z]/g,o=function(e){return e},s={ascii:[o,o],binary:[o,o],utf8:[l,c],ucs2:[d,v],hex:[p,h],base64:[atob,btoa]},u=/[^0-9A-Fa-f]/g;function f(e,n){for(var r in n){e[r]=n[r]}r="toString";if(e[r]!==n[r]){e[r]=n[r]}return e}function l(e){return unescape(encodeURIComponent(e))}function c(e){return decodeURIComponent(escape(e))}function d(e){var n="",r=0,t;for(;r<e.length;){t=e.charCodeAt(r++);n+=i(t%256)+i(t>>>8)}return n}function v(e){var n="",r=0;for(;r<e.length;){n+=i(e.charCodeAt(r++)+(e.charCodeAt(r++)<<8))}return n}function p(e){var n="",r=0;for(;r<e.length;r++){n+=i(parseInt(e.substr(r++,2),16))}return n}function h(e){var n="",r=0,t;for(;r<e.length;){t=(e.charCodeAt(r++)&255).toString(16);for(;t.length<2;t="0"+t);n+=t}return n}function m(e,n){if(!(this instanceof m)){return new m(e,n)}var r=b(e,n),t=z(this,0,r);y(t,e,n);return t}f(m,{useArrayBuffer:t.ArrayBuffer&&{}.__proto__,useTypedArrays:!!t.Int8Array,useDataView:!!t.DataView});if(typeof t.Buffer=="object"){f(m,t.Buffer)}t.Buffer=m;function E(e,n){if(!e){throw new Error(n)}}function g(e){e=(e||"utf8").toLowerCase().replace(a,"");E(e in s,"Unknown encoding");return e}function _(e){E(!(e.length%2)&&e.search(u)<0,"Invalid hex string")}function b(e,n){n=g(n);if(typeof e=="number"){return e>0?e:0}else if(typeof e=="string"){return m.byteLength(e,n)}else if(e instanceof Array){return e.length}return 0}function y(e,n,r){if(typeof n=="string"){e.write(n,0,e.length,r)}else if(n instanceof Array){for(var t=0;t<n.length;t++){e.writeUInt8(n[t],t,true)}}}function M(e){return e!==undefined&&e!==null}function I(e,n,r,t){if(!r){E(M(n),"missing offset");E(n>=0,"trying to read at negative offset");E(n+t<=e.length,"Trying to read beyond buffer length")}}function O(n,r,t,i,a,o,s,u){if(!i){s=s||0;E(M(t),"missing offset");E(M(r),"missing value");E(t>=0,"trying to write at negative offset");E(t+a<=n.length,"trying to write beyond buffer length");E(typeof r=="number","cannot write a non-number as a number");E(r>=s,s==0?"specified a negative value for writing an unsigned value":"value smaller than minimum allowed value");E(r<=o,"value is larger than maximum"+s==0?"value for type":"allowed value");E(u||e.floor(r)===r,"value has a fractional component")}}function x(e,n,r,t){return n?function(i,a,o,s){O(i,a,o,s,e,n,r,t)}:function(n,r,t){I(n,r,t,e)}}var L=x(1),N=x(2),S=x(4),A=x(8),T=x(1,255),w=x(2,65535),C=x(4,4294967295),R=x(1,127,-128),V=x(2,32767,-32768),U=x(4,2147483647,-2147483648),D=x(4,3.4028234663852886e38,-3.4028234663852886e38,true),F=x(8,1.7976931348623157e308,-1.7976931348623157e308,true);if(m.useArrayBuffer&&(m.useDataView||m.useTypedArrays)){var j=ArrayBuffer,P,z=function(e,n,r){if(!r){return e}var t=e.buffer||new j(r);if(e.offset){n+=e.offset}var i=new P(t,n,r);i.__proto__=m.prototype;if(i.__proto__===m.prototype){e=i}else{e=m()}e.buffer=t;e.offset=n;e.length=r;return e};if(m.useDataView){m.backend="DataView";P=DataView;var B=function(e,n){return P.prototype[(n?"set":"get")+e]}}else{m.backend="TypedArrays";P=Uint8Array;var G=function(){var e=new j;new Uint16Array(e)[0]=1;return!new P(e)[0]}(),q=function(e,n,r,t,i,a){var o=arguments.length>5,s;if(r<2||G==t){s=new i(e,n,1);if(o){s[0]=a}else{return s[0]}}else{var u=new j(r),f=new P(e,n,r),l=new P(u),c=r-1,d=0;s=new i(u);if(o){s[0]=a;for(;d<r;f[c-d]=l[d++]);}else{for(;d<r;l[c-d]=f[d++]);return s[0]}}},B=function(e,n){var r=t[e+"Array"],i=parseInt(e.replace(/^\D+/,""),10)>>>3;return n?function(e,n,t){q(this.buffer,e+this.offset,i,t,r,n)}:function(e,n){return q(this.buffer,e+this.offset,i,n,r)}}}var W=B("Uint8"),X=B("Uint16"),H=B("Uint32"),J=B("Int8"),Q=B("Int16"),k=B("Int32"),K=B("Float32"),Y=B("Float64"),$=B("Uint8",1),Z=B("Uint16",1),ee=B("Uint32",1),ne=B("Int8",1),re=B("Int16",1),te=B("Int32",1),ie=B("Float32",1),ae=B("Float64",1)}else{m.backend="Array";function oe(e,r,t,i,a){var o,s,u=a*8-i-1,f=(1<<u)-1,l=f>>1,c=-7,d=t?a-1:0,v=t?-1:1,p=e[r+d];d+=v;o=p&(1<<-c)-1;p>>=-c;c+=u;for(;c>0;o=o*256+e[r+d],d+=v,c-=8);s=o&(1<<-c)-1;o>>=-c;c+=i;for(;c>0;s=s*256+e[r+d],d+=v,c-=8);if(o===0){o=1-l}else if(o===f){return s?NaN:(p?-1:1)*Infinity}else{s=s+n(2,i);o=o-l}return(p?-1:1)*s*n(2,o-i)}function se(r,t,i,a,o,s){var u,f,l,c=s*8-o-1,d=(1<<c)-1,v=d>>1,p=o===23?n(2,-24)-n(2,-77):0,h=a?0:s-1,m=a?1:-1,E=i<0||i===0&&1/i<0?1:0;i=e.abs(i);if(isNaN(i)||i===Infinity){f=isNaN(i)?1:0;u=d}else{u=e.floor(e.log(i)/e.LN2);if(i*(l=n(2,-u))<1){u--;l*=2}if(u+v>=1){i+=p/l}else{i+=p*n(2,1-v)}if(i*l>=2){u++;l/=2}if(u+v>=d){f=0;u=d}else if(u+v>=1){f=(i*l-1)*n(2,o);u=u+v}else{f=i*n(2,v-1)*n(2,o);u=0}}for(;o>=8;r[t+h]=f&255,h+=m,f/=256,o-=8);u=u<<o|f;c+=o;for(;c>0;r[t+h]=u&255,h+=m,u/=256,c-=8);r[t+h-m]|=E*128}var z=function(e,n,r){var t=e.buffer||r>0&&new Array(r),i=0;if(e.offset){n+=e.offset}if(!e.buffer){if(t){for(;i<r;t[n+i++]=0);}}else{e=m()}e.buffer=t;e.offset=n;e.length=r;return e},W=function(e){return this.buffer[this.offset+e]},X=function(e,n){return W.call(this,e+(n?1:0))<<8|W.call(this,e+(n?0:1))},H=function(e,n){return(X.call(this,e+(n?2:0),n)<<15)*2+X.call(this,e+(n?0:2),n)},J=function(e){e=W.call(this,e);return e&128?e-256:e},Q=function(e,n){e=X.call(this,e,n);return e&32768?e-65536:e},k=function(e,n){e=H.call(this,e,n);return e&2147483648?e-4294967296:e},K=function(e,n){return oe(this.buffer,this.offset+e,n,23,4)},Y=function(e,n){return oe(this.buffer,this.offset+e,n,52,8)},$=function(e,n){this.buffer[this.offset+e]=n},Z=function(e,n,r){$.call(this,e+(r?1:0),n>>>8);$.call(this,e+(r?0:1),n&255)},ee=function(e,n,r){Z.call(this,e+(r?2:0),n>>>16,r);Z.call(this,e+(r?0:2),n&65535,r)},ne=function(e,n){$.call(this,e,n<0?n+256:n)},re=function(e,n,r){Z.call(this,e,n<0?n+65536:n,r)},te=function(e,n,r){ee.call(this,e,n<0?n+4294967296:n,r)},ie=function(e,n,r){return se(this.buffer,this.offset+e,n,r,23,4)},ae=function(e,n,r){return se(this.buffer,this.offset+e,n,r,52,8)}}f(m,{isBuffer:function(e){return e instanceof m},byteLength:function(e,n){n=g(n);E(typeof e=="string","Argument must be a string");switch(n){case"ascii":case"binary":return e.length;case"hex":return e.length>>>1;case"base64":var r=e.search(/=/);return(e.length*3>>>2)-(r<0?0:e.length-r);case"ucs2":return e.length*2;case"utf8":default:return l(e).length}},concat:function(n){var t=r.call(arguments),i=typeof t[t.length-1]=="number"?t.pop():-1,a=0,o=0,s=[],u,f,l=0;if(!(n instanceof Array)){n=t}for(;o<n.length;){u=n[o++];if(u){if(!m.isBuffer(u)){u=new m(u)}a+=u.length;s.push(u)}}f=new m(a=i<0?a:i);for(;s.length&&l<a;){u=s.shift();u.copy(f,l,0,e.min(u.length,a-l));l+=u.length}return f}});f(m.prototype,{readUInt8:function(e,n){L(this,e,n);return W.call(this,e)},readUInt16LE:function(e,n){N(this,e,n);return X.call(this,e,true)},readUInt16BE:function(e,n){N(this,e,n);return X.call(this,e,false)},readUInt32LE:function(e,n){S(this,e,n);return H.call(this,e,true)},readUInt32BE:function(e,n){S(this,e,n);return H.call(this,e,false)},readInt8:function(e,n){L(this,e,n);return J.call(this,e)},readInt16LE:function(e,n){N(this,e,n);return Q.call(this,e,true)},readInt16BE:function(e,n){N(this,e,n);return Q.call(this,e,false)},readInt32LE:function(e,n){S(this,e,n);return k.call(this,e,true)},readInt32BE:function(e,n){S(this,e,n);return k.call(this,e,false)},readFloatLE:function(e,n){S(this,e,n);return K.call(this,e,true)},readFloatBE:function(e,n){S(this,e,n);return K.call(this,e,false)},readDoubleLE:function(e,n){A(this,e,n);return Y.call(this,e,true)},readDoubleBE:function(e,n){A(this,e,n);return Y.call(this,e,false)},writeUInt8:function(e,n,r){T(this,e,n,r);return $.call(this,n,e)},writeUInt16LE:function(e,n,r){w(this,e,n,r);return Z.call(this,n,e,true)},writeUInt16BE:function(e,n,r){w(this,e,n,r);return Z.call(this,n,e,false)},writeUInt32LE:function(e,n,r){C(this,e,n,r);return ee.call(this,n,e,true)},writeUInt32BE:function(e,n,r){C(this,e,n,r);return ee.call(this,n,e,false)},writeInt8:function(e,n,r){R(this,e,n,r);return ne.call(this,n,e)},writeInt16LE:function(e,n,r){V(this,e,n,r);return re.call(this,n,e,true)},writeInt16BE:function(e,n,r){V(this,e,n,r);return re.call(this,n,e,false)},writeInt32LE:function(e,n,r){U(this,e,n,r);return te.call(this,n,e,true)},writeInt32BE:function(e,n,r){U(this,e,n,r);return te.call(this,n,e,false)},writeFloatLE:function(e,n,r){D(this,e,n,r);return ie.call(this,n,e,true)},writeFloatBE:function(e,n,r){D(this,e,n,r);return ie.call(this,n,e,false)},writeDoubleLE:function(e,n,r){F(this,e,n,r);return ae.call(this,n,e,true)},writeDoubleBE:function(e,n,r){F(this,e,n,r);return ae.call(this,n,e,false)},slice:function(e,n){var r=this;e=e||0;n=n||r.length;E(e>=0&&e<n&&n<=r.length,"oob");return z(r,e,n-e)},write:function(e,n,r,i){var a=this,o=0;n=n||0;r=r||a.length-n;E(typeof e=="string","Argument must be a string");i=g(i);e=s[i][0].call(t,e);for(;o<r;a.writeUInt8(e.charCodeAt(o)&255,n+o++));return r},copy:function(e,n,r,t){n=n||0;r=r||0;var i=this,a=r;t=t||i.length;E(t>=r,"sourceEnd < sourceStart");E(n>=0&&n<e.length,"targetStart out of bounds");E(r>=0&&r<i.length,"sourceStart out of bounds");E(t>=0&&t<=i.length,"sourceEnd out of bounds");for(;a<t;e.writeUInt8(i.readUInt8(a),n+a++-r));},fill:function(e,n,r){n=n||0;var t=this,i=n;r=r||t.length;if(typeof e=="string"){e=e.charCodeAt(0)}E(typeof e==="number"&&!isNaN(e),"value is not a number");E(r>=n,"end < start");E(n>=0&&n<t.length,"start out of bounds");E(r>0&&r<=t.length,"end out of bounds");e&=255;for(;i<r;t.writeUInt8(e,i++));},INSPECT_MAX_BYTES:50,inspect:function(n){var r=this,t=0,i="",a;n=e.min(r.INSPECT_MAX_BYTES,r.length,n||r.length);for(;t<n;){a=r.readUInt8(t++).toString(16);i+=" "+(a.length<2?"0":"")+a}return"<Buffer"+i+(t<r.length?" ... ":"")+">"},toString:function(e,n,r){var a=this,o=n||0,u="";if(arguments.length<1){return a.inspect()}n=o;r=r||a.length;e=g(e);for(;o<r;u+=i(a.readUInt8(o++)));return s[e][1].call(t,u)}})})();r("ThirdParty/Buffer.JS-0.2.1/buffer",function(){});r("Scene/Model/ObjLoader/createGltf",["Util/Path","ThirdParty/Buffer.JS-0.2.1/buffer"],function(e,n){"use strict";var r=Cesium.defined;var t=Cesium.defaultValue;var i=Cesium.WebGLConstants;function a(n,a,o){var s=n.vertexCount;var u=n.vertexArray;var f=n.positionMin;var l=n.positionMax;var c=n.hasUVs;var d=n.hasNormals;var v=n.materialGroups;var p=n.materials;var h=n.images;var m,E,g;var _=4;var b=4;var y=2;var M;var I;if(s<65535){M=i.UNSIGNED_SHORT;I=y}else{M=i.UNSIGNED_INT;I=b}var O=[];var x=0;var L;var N;for(g in v){if(v.hasOwnProperty(g)){L=v[g];N=L.length;O.push({indexArray:L,indexOffset:x,indexCount:N,material:g});x+=N}}var S=x*I;var A=u.length;var T=A*_;var w=T+S;var C=new Buffer(w);var R=0;for(m=0;m<A;++m){C.writeFloatLE(u[m],R);R+=_}var V=O.length;for(m=0;m<V;++m){L=O[m].indexArray;N=L.length;for(E=0;E<N;++E){if(I===y){C.writeUInt16LE(L[E],R)}else{C.writeUInt32LE(L[E],R)}R+=I}}var U=0;var D=0;var F=0;var j=0;if(d&&c){D=_*3;F=_*6;j=_*8}else if(d&&!c){D=_*3;j=_*6}else if(!d&&c){F=_*3;j=_*5}else if(!d&&!c){j=_*3}var P=o+"_buffer";var z="bufferView_vertex";var B="bufferView_index";var G="accessor_position";var q="accessor_uv";var W="accessor_normal";var X="mesh_"+o;var H="scene_"+o;var J="node_"+o;var Q="sampler_0";function k(e){return"accessor_index_"+e}function K(e){return"material_"+e}function Y(n){if(!r(n)){return undefined}return"texture_"+e.GetFileName(n)}function $(n){return e.GetFileName(n)}var Z={accessors:{},asset:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scene:H,scenes:{},textures:{}};Z.asset={generator:"ObjLoader",premultipliedAlpha:true,profile:{api:"WebGL",version:"1.0"},version:1,author_e:"695034525@qq.com",author_n:"韦修勇"};Z.scenes[H]={nodes:[J]};Z.nodes[J]={children:[],matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],meshes:[X],name:o};Z.samplers[Q]={};var ee=false;var ne;if(C.length>201326580){ee=true;ne=o+".bin"}else{ne="data:application/octet-stream;base64,"+C.toString("base64")}Z.buffers[P]={byteLength:w,type:"arraybuffer",uri:ne};Z.bufferViews[z]={buffer:P,byteLength:T,byteOffset:0,target:i.ARRAY_BUFFER};Z.bufferViews[B]={buffer:P,byteLength:S,byteOffset:T,target:i.ELEMENT_ARRAY_BUFFER};for(m=0;m<V;++m){var re=O[m];Z.accessors[k(m)]={bufferView:B,byteOffset:re.indexOffset*I,byteStride:0,componentType:M,count:re.indexCount,type:"SCALAR"}}Z.accessors[G]={bufferView:z,byteOffset:U,byteStride:j,componentType:i.FLOAT,count:s,min:f,max:l,type:"VEC3"};if(d){Z.accessors[W]={bufferView:z,byteOffset:D,byteStride:j,componentType:i.FLOAT,count:s,type:"VEC3"}}if(c){Z.accessors[q]={bufferView:z,byteOffset:F,byteStride:j,componentType:i.FLOAT,count:s,type:"VEC2"}}var te=[];Z.meshes[X]={name:o,primitives:te};var ie={};ie.POSITION=G;if(d){ie.NORMAL=W}if(c){ie.TEXCOORD_0=q}for(m=0;m<V;++m){te.push({attributes:ie,indices:k(m),material:K(O[m].material),mode:i.TRIANGLES})}for(g in p){if(p.hasOwnProperty(g)){var ae=p[g];var oe=K(g);var se={ambient:t(t(Y(ae.ambientColorMap),ae.ambientColor),[0,0,0,1]),diffuse:t(t(Y(ae.diffuseColorMap),ae.diffuseColor),[0,0,0,1]),emission:t(t(Y(ae.emissionColorMap),ae.emissionColor),[0,0,0,1]),specular:t(t(Y(ae.specularColorMap),ae.specularColor),[0,0,0,1]),shininess:t(ae.specularShininess,0)};Z.materials[oe]={name:g,values:se}}}for(g in h){if(h.hasOwnProperty(g)){var ue=h[g];var fe=$(g);var le=Y(g);var ce;var de=ue.channels;switch(de){case 1:ce=i.ALPHA;break;case 2:ce=i.LUMINANCE_ALPHA;break;case 3:ce=i.RGB;break;case 4:ce=i.RGBA;break}Z.images[fe]={uri:ue.uri,name:fe};Z.textures[le]={format:ce,internalFormat:ce,sampler:Q,source:fe,target:i.TEXTURE_2D,type:i.UNSIGNED_BYTE}}}return Z}return a});function i(e,n,r){o.load(e,"arraybuffer","GET",null,null,{resolve:n,reject:r})}function a(e){return e!==undefined&&e!==null}var o={};o.load=function(e,n,r,t,i,o,s){var u=new XMLHttpRequest;if(a(s)&&a(u.overrideMimeType)){u.overrideMimeType(s)}u.open(r,e,true);if(a(i)){for(var f in i){if(i.hasOwnProperty(f)){u.setRequestHeader(f,i[f])}}}if(a(n)){u.responseType=n}u.onload=function(){if(u.status<200||u.status>=300){o.reject(new RequestErrorEvent(u.status,u.response,u.getAllResponseHeaders()));return}var e=u.response;var r=u.responseType;if(a(e)&&(!a(n)||r===n)){o.resolve(e)}else if(n==="json"&&typeof e==="string"){try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}}else if((r===""||r==="document")&&a(u.responseXML)&&u.responseXML.hasChildNodes()){o.resolve(u.responseXML)}else if((r===""||r==="text")&&a(u.responseText)){o.resolve(u.responseText)}else{o.reject(new RuntimeError("Invalid XMLHttpRequest response type."))}};u.onerror=function(e){o.reject(new Error("请求出错"+e.data))};u.send(t)};if(typeof module==="undefined"){this.loadArrayBuffer=i}else{module.exports=i}if(typeof r==="function"){r("Util/loadArrayBuffer",[],function(){return i})}r("Scene/Model/ObjLoader/loadImage",["Util/Path","Util/loadArrayBuffer"],function(e,n){"use strict";function r(e){switch(e){case 0:return 1;case 2:return 3;case 4:return 2;case 6:return 4;default:return 3}}function t(e){switch(e){case"png":return"data:image/png";case"jpg":return"data:image/jpeg";case"jpeg":return"data:image/jpeg";case"gif":return"data:image/gif";default:return"data:image/"+e}}function i(i){return new Promise(function(a,o){n(i,function(n){var s=new Uint8Array(n);var u=e.GetExtension(i).slice(1);var f=t(u);var l=new Blob([s],{type:f.replace("data:","")});var c=new FileReader;c.onload=function(e){var n=e.target.result;var t={transparent:false,channels:3,data:s,uri:n};if(u==="png"){var i=s[25];var o=r(i);t.channels=o;t.transparent=o===4}a(t)};c.onerror=function(e){o(e)};c.readAsDataURL(l)},function(e){o(e)})})}return i});r("Scene/Model/ObjLoader/Material",["Util/Path","Util/loadArrayBuffer"],function(e,n){"use strict";var r=function(e){return typeof e!=="undefined"&&e!=null};function t(){return{ambientColor:undefined,emissionColor:undefined,diffuseColor:undefined,specularColor:undefined,specularShininess:undefined,alpha:undefined,ambientColorMap:undefined,emissionColorMap:undefined,diffuseColorMap:undefined,specularColorMap:undefined,specularShininessMap:undefined,normalMap:undefined,alphaMap:undefined}}function i(){var e=t();e.diffuseColor=[.5,.5,.5,1];return e}function a(e,i){return new Promise(function(a,o){n(e,function(n){if(!i){i="utf-8"}try{var s=new TextDecoder(i);var u=s.decode(n,{stream:true});var f={};var l;var c;var d;var v=u.split("\n");var p=v.length;for(var h=0;h<p;++h){var m=v[h].trim();if(/^newmtl /i.test(m)){var E=m.substring(7).trim();l=t();f[E]=l}else if(/^Ka /i.test(m)){c=m.substring(3).trim().split(" ");l.ambientColor=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),1]}else if(/^Ke /i.test(m)){c=m.substring(3).trim().split(" ");l.emissionColor=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),1]}else if(/^Kd /i.test(m)){c=m.substring(3).trim().split(" ");l.diffuseColor=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),1]}else if(/^Ks /i.test(m)){c=m.substring(3).trim().split(" ");l.specularColor=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),1]}else if(/^Ns /i.test(m)){d=m.substring(3).trim();l.specularShininess=parseFloat(d)}else if(/^d /i.test(m)){d=m.substring(2).trim();l.alpha=parseFloat(d)}else if(/^Tr /i.test(m)){d=m.substring(3).trim();l.alpha=parseFloat(d)}else if(/^map_Ka /i.test(m)){l.ambientColorMap=m.substring(7).trim()}else if(/^map_Ke /i.test(m)){l.emissionColorMap=m.substring(7).trim()}else if(/^map_Kd /i.test(m)){l.diffuseColorMap=m.substring(7).trim()}else if(/^map_Ks /i.test(m)){l.specularColorMap=m.substring(7).trim()}else if(/^map_Ns /i.test(m)){l.specularShininessMap=m.substring(7).trim()}else if(/^map_Bump /i.test(m)){l.normalMap=m.substring(9).trim()}else if(/^map_d /i.test(m)){l.alphaMap=m.substring(6).trim()}}if(r(l.alpha)){l.diffuseColor[3]=l.alpha}a(f)}catch(n){console.log("Could not read material file at "+e+". Using default material instead.");o(n)}},function(e){o(e)})})}var o={getDefault:i,parse:a};return o});r("Scene/Model/ObjLoader/parseObj",["Util/loadArrayBuffer","Util/Path","Scene/Model/ObjLoader/loadImage","Scene/Model/ObjLoader/Material"],function(e,n,r,t){"use strict";var i=Cesium.Cartesian3;var a=Cesium.defined;function o(e,n,r){if(!r){r="utf-8"}return l(e,n,r).then(function(e){var n=e.info;var t=e.materials;var i=e.images;var a=e.allLines;return s(a,n,t,i,r)})}function s(e,n,r,o){return new Promise(function(s){var u={};var f=0;var l=[];var c=[];var d=[];var v=[];var p=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE];var h=[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE];var m=n.hasNormals;var E=n.hasUVs;var g={};var _;function b(e){if(!a(r[e])){y()}else{_=g[e];if(!a(_)){_=[];g[e]=_}}}function y(){var e="czmDefaultMat";if(!a(r[e])){r[e]=t.getDefault()}b(e)}var M=Object.keys(r).length;if(M===0){y()}function I(e,n,r){var t=parseInt(e);if(t<0){return(n.length/r+t)*r}return(t-1)*r}function O(e,n,r){var t=I(e,c,3);var i=c[t+0];var o=c[t+1];var s=c[t+2];p[0]=Math.min(i,p[0]);p[1]=Math.min(o,p[1]);p[2]=Math.min(s,p[2]);h[0]=Math.max(i,h[0]);h[1]=Math.max(o,h[1]);h[2]=Math.max(s,h[2]);l.push(i,o,s);if(m){var u=I(r,d,3);var f=d[u+0];var g=d[u+1];var _=d[u+2];l.push(f,g,_)}if(E){if(a(n)){var b=I(n,v,2);var y=v[b+0];var M=v[b+1];M=1-M;l.push(y,M)}else{l.push(0,0)}}}function x(e,n,r,t){var i=u[e];if(!a(i)){i=f++;u[e]=i;O(n,r,t)}return i}function L(e,n,r,t,i,o,s,u,f,l,c,d,v,p,h,m){var E=x(e,n,r,t);var g=x(i,o,s,u);var b=x(f,l,c,d);_.push(E);_.push(g);_.push(b);if(a(v)){var y=x(v,p,h,m);_.push(E);_.push(b);_.push(y)}}var N=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/;var S=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/;var A=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/;var T=/f( +-?\d+)\/?( +-?\d+)\/?( +-?\d+)\/?( +-?\d+)?\/?/;var w=/f( +(-?\d+)\/(-?\d+)\/?)( +(-?\d+)\/(-?\d+)\/?)( +(-?\d+)\/(-?\d+)\/?)( +(-?\d+)\/(-?\d+)\/?)?/;var C=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/;var R=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;e.forEach(function(e){e=e.trim();var n;if(e.length===0||e.charAt(0)==="#"){}else if((n=N.exec(e))!==null){c.push(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]))}else if((n=S.exec(e))!==null){var r=parseFloat(n[1]);var t=parseFloat(n[2]);var a=parseFloat(n[3]);var o;if(r<1e-4&&t<1e-4&&a<1e-4){o=i.normalize(new i(r+1e-4,t+1e-4,a+1e-4),new i)}else{o=i.normalize(new i(r,t,a),new i)}d.push(o.x,o.y,o.z)}else if((n=A.exec(e))!==null){v.push(parseFloat(n[1]),parseFloat(n[2]))}else if((n=T.exec(e))!==null){L(n[1],n[1],undefined,undefined,n[2],n[2],undefined,undefined,n[3],n[3],undefined,undefined,n[4],n[4],undefined,undefined)}else if((n=w.exec(e))!==null){L(n[1],n[2],n[3],undefined,n[4],n[5],n[6],undefined,n[7],n[8],n[9],undefined,n[10],n[11],n[12],undefined)}else if((n=C.exec(e))!==null){L(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16])}else if((n=R.exec(e))!==null){L(n[1],n[2],undefined,n[3],n[4],n[5],undefined,n[6],n[7],n[8],undefined,n[9],n[10],n[11],undefined,n[12])}else if(/^usemtl /.test(e)){var s=e.substring(7).trim();b(s)}});s({vertexCount:f,vertexArray:l,positionMin:p,positionMax:h,hasUVs:E,hasNormals:m,materialGroups:g,materials:r,images:o})})}function u(e,t){var i=[];for(var o in t){if(t.hasOwnProperty(o)){var s=t[o];if(a(s.ambientColorMap)&&i.indexOf(s.ambientColorMap)===-1){i.push(s.ambientColorMap)}if(a(s.diffuseColorMap)&&i.indexOf(s.diffuseColorMap)===-1){i.push(s.diffuseColorMap)}if(a(s.emissionColorMap)&&i.indexOf(s.emissionColorMap)===-1){i.push(s.emissionColorMap)}if(a(s.specularColorMap)&&i.indexOf(s.specularColorMap)===-1){i.push(s.specularColorMap)}}}var u=[];var f={};var l=i.length;for(var c=0;c<l;c++){var d=i[c];d=n.Combine(e,d);u.push(r(d))}return Promise.all(u).then(function(e){var n=e.length;for(var r=0;r<n;r++){var t=i[r];var a=e[r];f[t]=a}return f})}function f(e,n,r){if(n&&a(e)){return t.parse(e,r)}return{}}function l(r,t,i){if(!i){i="utf-8"}var o;var s;var l;var c=false;var d=false;var v=false;var p=false;return new Promise(function(s,h){e(r,function(e){var r=new TextDecoder(i);var m=r.decode(e,{stream:true});var E=m.split(/[\r\n]+/);E.forEach(function(e){if(!a(o)){var r=e.match(/^mtllib.*/gm);if(r!==null){var i=r[0].substring(7).trim();o=i;o=n.Combine(t,i)}}if(!c){c=/^usemtl/gm.test(e)}if(!d){d=/^v\s/gm.test(e)}if(!v){v=/^vn/gm.test(e)}if(!p){p=/^vt/gm.test(e)}});if(!d){h(new Error("Could not process OBJ file, no positions."));return}l={hasNormals:v,hasUVs:p};f(o,c,i).then(function(e){u(t,e).then(function(n){s({info:l,materials:e,images:n,allLines:E})})})})})}return o});r("Scene/Model/ObjLoader/Shaders/none_frag",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nvarying vec3 v_position;\n\nuniform vec4 u_ambient;\nuniform vec4 u_diffuse;\nuniform vec4 u_specular;\nuniform float u_shininess;\n\nvoid main(void) \n{\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n    vec4 ambient = u_ambient;\n    vec4 diffuse = u_diffuse;\n    vec4 specular = u_specular;\n    color.xyz += ambient.xyz;\n    color.xyz += diffuse.xyz;\n    color.xyz += specular.xyz;\n    color = vec4(color.rgb * diffuse.a, diffuse.a);\n    gl_FragColor = color;\n}";return e});r("Scene/Model/ObjLoader/Shaders/none_vert",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nattribute vec3 a_position;\n\nuniform mat4 u_modelViewMatrix;\nuniform mat4 u_projectionMatrix;\n\nvarying vec3 v_position;\n\nvoid main(void) \n{\n    vec4 pos = u_modelViewMatrix * vec4(a_position,1.0);\n    v_position = pos.xyz;\n    gl_Position = u_projectionMatrix * pos;\n}";return e});r("Scene/Model/ObjLoader/Shaders/normals_frag",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\nuniform vec4 u_ambient;\nuniform vec4 u_diffuse;\nuniform vec4 u_specular;\nuniform float u_shininess;\nuniform float u_transparency;\n\nvarying vec3 v_light0Direction;\n\nvoid main(void) \n{\n    vec3 normal = normalize(v_normal);\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n    vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n    vec3 lightColor = vec3(1.0,1.0,1.0);\nvec4 ambient = u_ambient;\n    vec4 diffuse = u_diffuse;\n    vec4 specular = u_specular;\n\n    vec3 specularLight = vec3(0.0, 0.0, 0.0);\n    {\n        float specularIntensity = 0.0;\n        float attenuation = 1.0;\n        vec3 l = normalize(v_light0Direction);\n        vec3 viewDir = -normalize(v_position);\n        vec3 h = normalize(l+viewDir);\n        specularIntensity = max(0.0, pow(max(dot(normal,h), 0.0) , u_shininess)) * attenuation;\n        specularLight += lightColor * specularIntensity;\n        diffuseLight += lightColor * max(dot(normal,l), 0.0) * attenuation;\n    }\n    //specular.xyz *= specularLight;\n    //diffuse.xyz *= diffuseLight;\n    color.xyz += ambient.xyz;\n    color.xyz += diffuse.xyz;\n    color.xyz += specular.xyz;\n    color = vec4(color.rgb * diffuse.a, diffuse.a*u_transparency);\n    gl_FragColor = color;\n}";return e});r("Scene/Model/ObjLoader/Shaders/normals_vert",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\n\nuniform mat3 u_normalMatrix;\nuniform mat4 u_modelViewMatrix;\nuniform mat4 u_projectionMatrix;\n\nvarying vec3 v_position;\nvarying vec3 v_normal;\n\nvarying vec3 v_light0Direction;\n\nvoid main(void) \n{\n    vec4 pos = u_modelViewMatrix * vec4(a_position,1.0);\n    v_normal = u_normalMatrix * a_normal;\n    v_position = pos.xyz;\n    v_light0Direction = mat3(u_modelViewMatrix) * vec3(1.0,1.0,1.0);\n    gl_Position = u_projectionMatrix * pos;\n}";return e});r("Scene/Model/ObjLoader/Shaders/texture_frag",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nvarying vec3 v_position;\nvarying vec2 v_texcoord0;\n\nuniform vec4 u_ambient;\nuniform sampler2D u_diffuse;\nuniform vec4 u_specular;\nuniform float u_shininess;\n\nuniform float u_transparency;\n\nvoid main(void) \n{\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n    vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n    vec3 lightColor = vec3(1.0,1.0,1.0);\n    vec4 ambient = u_ambient;\n    vec4 diffuse = texture2D(u_diffuse, v_texcoord0);\n    vec4 specular = u_specular;\n    color.xyz += ambient.xyz;\n    color.xyz += diffuse.xyz;\n    color.xyz += specular.xyz;\n    color = vec4(diffuse.rgb * diffuse.a, diffuse.a*u_transparency);\n    gl_FragColor = color;\n}";return e});r("Scene/Model/ObjLoader/Shaders/texture_vert",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nattribute vec3 a_position;\nattribute vec2 a_texcoord0;\n\nuniform mat4 u_modelViewMatrix;\nuniform mat4 u_projectionMatrix;\n\nvarying vec3 v_position;\nvarying vec2 v_texcoord0;\n\nvoid main(void) \n{\n    vec4 pos = u_modelViewMatrix * vec4(a_position,1.0);\n    v_texcoord0 = a_texcoord0;\n    v_position = pos.xyz;\n    gl_Position = u_projectionMatrix * pos;\n}";return e});r("Scene/Model/ObjLoader/Shaders/texture_normals_frag",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nvarying vec3 v_position;\nvarying vec2 v_texcoord0;\nvarying vec3 v_normal;\n\nuniform vec4 u_ambient;\nuniform vec4 u_specular;\nuniform float u_shininess;\n\nuniform sampler2D u_diffuse;\n\nvarying vec3 v_light0Direction;\n\nvoid main(void) \n{\n    vec3 normal = normalize(v_normal);\n    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n    vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n    vec3 lightColor = vec3(1.0,1.0,1.0);\n    vec4 ambient = u_ambient;\n    vec4 diffuse = texture2D(u_diffuse, v_texcoord0);\n    vec4 specular = u_specular;\n\n    vec3 specularLight = vec3(0.0, 0.0, 0.0);\n    {\n        float specularIntensity = 0.0;\n        float attenuation = 1.0;\n        vec3 l = normalize(v_light0Direction);\n        vec3 viewDir = -normalize(v_position);\n        vec3 h = normalize(l+viewDir);\n        specularIntensity = max(0.0, pow(max(dot(normal,h), 0.0) , u_shininess)) * attenuation;\n        specularLight += lightColor * specularIntensity;\n        diffuseLight += lightColor * max(dot(normal,l), 0.0) * attenuation;\n    }\n    //specular.xyz *= specularLight;\n    //diffuse.xyz *= diffuseLight;\n    color.xyz += ambient.xyz;\n    color.xyz += diffuse.xyz;\n    color.xyz += specular.xyz;\n    color = vec4(diffuse.rgb * diffuse.a, diffuse.a);\n    gl_FragColor = color;\n}";return e})
;r("Scene/Model/ObjLoader/Shaders/texture_normals_vert",[],function(){var e="\n#ifdef GL_ES\n    precision highp float;\n#endif\n\nattribute vec3 a_position;\nattribute vec2 a_texcoord0;\nattribute vec3 a_normal;\n\nuniform mat3 u_normalMatrix;\nuniform mat4 u_modelViewMatrix;\nuniform mat4 u_projectionMatrix;\n\nvarying vec3 v_position;\nvarying vec2 v_texcoord0;\nvarying vec3 v_normal;\n\nvarying vec3 v_light0Direction;\n\nvoid main(void) \n{\n    vec4 pos = u_modelViewMatrix * vec4(a_position,1.0);\n    v_normal = u_normalMatrix * a_normal;\n    v_texcoord0 = a_texcoord0;\n    v_position = pos.xyz;\n    v_light0Direction = mat3(u_modelViewMatrix) * vec3(1.0,1.0,1.0);\n    gl_Position = u_projectionMatrix * pos;\n}";return e});r("Scene/Model/ObjLoader/TechniqueHandler",["Scene/Model/ObjLoader/Shaders/none_frag","Scene/Model/ObjLoader/Shaders/none_vert","Scene/Model/ObjLoader/Shaders/normals_frag","Scene/Model/ObjLoader/Shaders/normals_vert","Scene/Model/ObjLoader/Shaders/texture_frag","Scene/Model/ObjLoader/Shaders/texture_vert","Scene/Model/ObjLoader/Shaders/texture_normals_frag","Scene/Model/ObjLoader/Shaders/texture_normals_vert"],function(e,n,r,t,i,a,o,s){function u(e){var n;n=encodeURIComponent(e);n=unescape(n);n=window.btoa(n);return n}function f(e){rv=window.atob(e);rv=escape(rv);rv=decodeURIComponent(rv);return rv}var l="data:text/plain;base64,";e=u(e);n=u(n);r=l+window.btoa(r),t=l+window.btoa(t),i=l+window.btoa(i),a=l+window.btoa(a),o=l+u(o);s=l+u(s);var c=Cesium.WebGLConstants;function d(e){this.gltf=e}d.TECHNIQUE_TEXTURE_NORMALS_ID="techniqueTextureNormals";d.TECHNIQUE_TEXTURE_NORMALS_ID_TRANSPARENT="techniqueTextureNormalsTransparent";d.TECHNIQUE_TEXTURE_ID_TRANSPARENT="techniqueTextureTransparent";d.TECHNIQUE_TEXTURE_ID="techniqueTexture";d.TECHNIQUE_NORMALS_ID="techniqueNormals";d.TECHNIQUE_NONE_ID="techniqueNone";d.AMBIENT_NAME="ambient";d.DIFFUSE_NAME="diffuse";d.SPECULAR_NAME="specular";d.SHININESS_NAME="shininess";d.TRANAPARENCY_NAME="transparency";d.prototype.getTechniqueId=function(u,f,l){if(u&&f){var c=l?d.TECHNIQUE_TEXTURE_NORMALS_ID_TRANSPARENT:d.TECHNIQUE_TEXTURE_NORMALS_ID;var v=s;var p=o;this.createTechnique(c,u,f,v,p,l);return c}if(u&&!f){var c=l?d.TECHNIQUE_TEXTURE_ID_TRANSPARENT:d.TECHNIQUE_TEXTURE_ID;var v=a;var p=i;this.createTechnique(c,u,f,v,p,l);return c}if(!u&&f){var c=d.TECHNIQUE_NORMALS_ID;var v=t;var p=r;this.createTechnique(c,u,f,v,p,false);return c}else{var c=d.TECHNIQUE_NONE_ID;var v=n;var p=e;this.createTechnique(c,u,f,v,p,false);return c}};function v(e,n){var r=[];var t=0;if(n!=null){for(var i in n){if(n.hasOwnProperty(i)){r.push(i);t++}}}while(true){var a=e+t;if(r.indexOf(a)<0){return a}t++}}d.prototype.createTechnique=function(e,n,r,t,i,a){if(!this.gltf.techniques){this.gltf.techniques={}}var o=this.gltf.techniques;var s=null;if(o!=null){if(o.hasOwnProperty(e)){s=o[e];return}}else{this.gltf.techniques={}}if(!this.gltf.programs){this.gltf.programs={}}var u=v("program",this.gltf.programs);if(!this.gltf.shaders){this.gltf.shaders={}}var f=v("vertexShader_for_"+u,this.gltf.shaders);var l={uri:t,type:c.VERTEX_SHADER,name:f};this.gltf.shaders[f]=l;var m=v("fragmentShader_for_"+u,this.gltf.shaders);var E={uri:i,type:c.FRAGMENT_SHADER,name:m};this.gltf.shaders[m]=E;var g={attributes:[],fragmentShader:m,vertexShader:f};var _=[];_.push("a_position");if(n){_.push("a_texcoord0")}if(r){_.push("a_normal")}g.attributes=_;this.gltf.programs[u]=g;s={parameters:null,attributes:null,program:null,uniforms:null,states:null};s.program=u;var b={};b["a_position"]="position";if(n){b["a_texcoord0"]="texcoord0"}if(r){b["a_normal"]="normal"}s.attributes=b;var y={};y["position"]=p(c.FLOAT_VEC3,"POSITION");if(n){y["texcoord0"]=p(c.FLOAT_VEC2,"TEXCOORD_0")}if(r){y["normal"]=p(c.FLOAT_VEC3,"NORMAL")}y["modelViewMatrix"]=p(c.FLOAT_MAT4,h.MODELVIEW);if(r){y["normalMatrix"]=p(c.FLOAT_MAT3,h.MODELVIEWINVERSETRANSPOSE)}y["projectionMatrix"]=p(c.FLOAT_MAT4,h.PROJECTION);y[d.AMBIENT_NAME]=p(c.FLOAT_VEC4);if(n){y[d.DIFFUSE_NAME]=p(c.SAMPLER_2D)}else{y[d.DIFFUSE_NAME]=p(c.FLOAT_VEC4)}y[d.SPECULAR_NAME]=p(c.FLOAT_VEC4);y[d.SHININESS_NAME]=p(c.FLOAT);y[d.TRANAPARENCY_NAME]=p(c.FLOAT);s.parameters=y;var M={};M["u_ambient"]=d.AMBIENT_NAME;M["u_diffuse"]=d.DIFFUSE_NAME;M["u_specular"]=d.SPECULAR_NAME;M["u_shininess"]=d.SHININESS_NAME;M["u_transparency"]=d.TRANAPARENCY_NAME;M["u_modelViewMatrix"]="modelViewMatrix";if(r){M["u_normalMatrix"]="normalMatrix"}M["u_projectionMatrix"]="projectionMatrix";s.uniforms=M;var I={enable:[],functions:{}};I.enable.push(c.DEPTH_TEST);I.enable.push(c.CULL_FACE);if(a){I.enable.push(c.BLEND)}s.states=I;this.gltf.techniques[e]=s};function p(e,n){if(arguments.length==1){return{type:e}}else{return{type:e,semantic:n}}}function h(){}h.LOCAL="LOCAL";h.MODEL="MODEL";h.VIEW="VIEW";h.PROJECTION="PROJECTION";h.MODELVIEW="MODELVIEW";h.MODELVIEWPROJECTION="MODELVIEWPROJECTION";h.MODELINVERSE="MODELINVERSE";h.VIEWINVERSE="VIEWINVERSE";h.MODELVIEWINVERSE="MODELVIEWINVERSE";h.PROJECTIONINVERSE="PROJECTIONINVERSE";h.MODELVIEWPROJECTIONINVERSE="MODELVIEWPROJECTIONINVERSE";h.MODELINVERSETRANSPOSE="MODELINVERSETRANSPOSE";h.MODELVIEWINVERSETRANSPOSE="MODELVIEWINVERSETRANSPOSE";h.VIEWPORT="VIEWPORT";h.JOINTMATRIX="JOINTMATRIX";h.contains=function(e){switch(e){case h.JOINTMATRIX:case h.LOCAL:case h.MODEL:case h.MODELINVERSE:case h.MODELINVERSETRANSPOSE:case h.MODELVIEW:case h.MODELVIEWINVERSE:case h.MODELVIEWINVERSETRANSPOSE:case h.MODELVIEWPROJECTION:case h.MODELVIEWPROJECTIONINVERSE:case h.PROJECTION:case h.PROJECTIONINVERSE:case h.VIEW:case h.VIEWINVERSE:case h.VIEWPORT:return true}return false};return d});r("Scene/Model/ObjLoader/ObjLoader",["Scene/Model/ObjLoader/createGltf","Scene/Model/ObjLoader/parseObj","Util/Path","Scene/Model/ObjLoader/TechniqueHandler"],function(e,n,r,t){var i={load:function i(a){var o=r.GetDirectoryName(a)+"/";var s=r.ChangeExtension(r.GetFileName(a),"");return n(a,o).then(function(n){var r=e(n,o,s);var i=new t(r);for(var a in r.meshes){var u=r.meshes[a].primitives;u.forEach(function(e){var n=typeof e.attributes.NORMAL!=="undefined";var t=false;var a=false;var o=r.materials[e.material];for(var s in o.values){if(typeof o.values[s]==="string"){t=true;a=r.textures[o.values[s]].format==Cesium.WebGLConstants.RGBA}}var u=i.getTechniqueId(t,n,a);o.technique=u;o.values["transparency"]=1})}i=null;return r})}};return i});n(["Scene/Model/ObjLoader/ObjLoader"],function(e){"use strict";var n=typeof window!=="undefined"?window:typeof self!=="undefined"?self:{};n.ObjLoader=e},undefined,true)})();if(typeof define==="function"){define(function(){var e=ObjLoader;ObjLoader=undefined;return e})}else if(typeof module==="undefined"){window.ObjLoader=ObjLoader}else{module.exports=ObjLoader}