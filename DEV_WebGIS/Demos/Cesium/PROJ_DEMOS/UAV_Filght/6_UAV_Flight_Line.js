// panel operation
$('#left-panel-link').panelslider();

$('#right-panel-link').panelslider({
    bodyClass: 'ps-active-right',
    clickClose: false, // Clicking outside this panel wont close it because this line
    onOpen: function () {
        console.log('right panel open');
    }
});

$('#close-panel-bt').click(function () {
    $.panelslider.close();
});

$('#left-panel, #right-panel').on('psBeforeOpen psOpen psBeforeClose psClose', function (e) {
    console.log(e.type, e.target.getAttribute('id'));
});


// cesium initial
// ----------------------------------------------------------------------------------------------------------------------
var cesium_op = new CesiumHelper("cesiumContainer");

//显示坐标
var handler = new Cesium.ScreenSpaceEventHandler(cesium_op.canvas);
var scene = cesium_op.scene;
var viewer = cesium_op.viewer;
handler.setInputAction(function (movement) {
    var cartesian = scene.camera.pickEllipsoid(movement.endPosition, ellipsoid);
    var ellipsoid = scene.globe.ellipsoid;
    if (cartesian) {
        //能获取，显示坐标
        var cartographic = ellipsoid.cartesianToCartographic(cartesian);
        var coords = 'Lng ' + Cesium.Math.toDegrees(cartographic.longitude).toFixed(2) +
            ', Lat ' + Cesium.Math.toDegrees(cartographic.latitude).toFixed(2) +
            ', Z ' + Math.ceil(viewer.camera.positionCartographic.height);
        document.getElementById('coords').innerHTML = coords;
        document.getElementById('coords').style.display = '';
    } else {
        //不能获取不显示
        document.getElementById('coords').style.display = 'none';
    }
}, Cesium.ScreenSpaceEventType.LEFT_CLICK);

//设置镜头飞翔特效，加载完成后，执行给定的函数
cesium_op.setCameraLocAndOrient(116.3, 8.0, 8000000,0,-90,0);
cesium_op.flyCameraToLoc(116.3, 12.0, 8000000,15,-75,-10,1000,postUAVData_AddEntities);
function postUAVData_AddEntities()  {
    // JQuery post data  call back

    // uav line
    var orangeOutlined = viewer.entities.add({
        name: 'Orange line with black outline at height and following the surface',
        polyline: {
            positions: Cesium.Cartesian3.fromDegreesArrayHeights([
                119.5220, 29.3460, 200,
                119.5041, 29.3320, 200,
                119.5041, 29.3320, 200,
                119.5041, 29.3320, 200,
                119.5041, 29.3321, 190,
                119.5041, 29.3321, 190,
                119.5042, 29.3322, 190,
                119.5042, 29.3324, 190,
                119.5043, 29.3325, 190,
                119.5044, 29.3326, 190,
                119.5044, 29.3327, 190,
                119.5045, 29.3329, 190,
                119.5046, 29.3330, 190,
                119.5047, 29.3332, 190,
                119.5047, 29.3333, 190,
                119.5048, 29.3335, 190,
                119.5049, 29.3336, 190,
                119.5050, 29.3338, 190,
                119.5051, 29.3339, 190,
                119.5052, 29.3340, 190,
                119.5053, 29.3342, 190,
                119.5053, 29.3343, 190,
                119.5054, 29.3345, 190,
                119.5055, 29.3346, 190,
                119.5056, 29.3348, 190,
                119.5057, 29.3349, 190,
                119.5057, 29.3350, 200,
                119.5058, 29.3352, 200,
                119.5059, 29.3353, 200,
                119.5060, 29.3355, 190,
                119.5060, 29.3356, 190,
                119.5061, 29.3357, 190,
                119.5062, 29.3359, 200,
                119.5063, 29.3360, 200,
                119.5064, 29.3362, 190,
                119.5064, 29.3363, 190,
                119.5065, 29.3365, 200,
                119.5066, 29.3366, 200,
                119.5067, 29.3367, 190,
                119.5067, 29.3369, 190,
                119.5068, 29.3370, 200,
                119.5069, 29.3372, 200,
                119.5070, 29.3373, 200,
                119.5071, 29.3374, 200,
                119.5071, 29.3376, 200,
                119.5072, 29.3377, 200,
                119.5073, 29.3378, 200,
                119.5074, 29.3380, 200,
                119.5074, 29.3381, 200,
                119.5075, 29.3383, 200,
                119.5076, 29.3384, 190,
                119.5077, 29.3385, 200,
                119.5078, 29.3387, 200,
                119.5078, 29.3388, 200,
                119.5079, 29.3390, 200,
                119.5080, 29.3391, 200,
                119.5081, 29.3393, 190,
                119.5082, 29.3394, 200,
                119.5083, 29.3395, 200,
                119.5083, 29.3397, 200,
                119.5084, 29.3398, 200,
                119.5085, 29.3399, 200,
                119.5086, 29.3401, 200,
                119.5086, 29.3402, 200,
                119.5087, 29.3404, 190,
                119.5088, 29.3405, 200,
                119.5089, 29.3406, 200,
                119.5090, 29.3408, 190,
                119.5090, 29.3409, 190,
                119.5091, 29.3411, 190,
                119.5092, 29.3412, 190,
                119.5093, 29.3413, 200,
                119.5094, 29.3415, 200,
                119.5095, 29.3416, 200,
                119.5095, 29.3417, 200,
                119.5096, 29.3419, 200,
                119.5097, 29.3420, 190,
                119.5098, 29.3421, 190,
                119.5099, 29.3423, 190,
                119.5100, 29.3424, 190,
                119.5101, 29.3425, 190,
                119.5101, 29.3427, 190,
                119.5102, 29.3428, 190,
                119.5103, 29.3429, 190,
                119.5104, 29.3430, 190,
                119.5105, 29.3432, 190,
                119.5106, 29.3433, 190,
                119.5107, 29.3434, 190,
                119.5108, 29.3435, 190,
                119.5109, 29.3436, 190,
                119.5110, 29.3438, 190,
                119.5111, 29.3439, 190,
                119.5112, 29.3440, 190,
                119.5113, 29.3442, 190,
                119.5114, 29.3443, 190,
                119.5115, 29.3444, 190,
                119.5116, 29.3445, 190,
                119.5117, 29.3447, 190,
                119.5117, 29.3448, 190,
                119.5118, 29.3449, 190,
                119.5119, 29.3451, 190,
                119.5120, 29.3452, 190,
                119.5121, 29.3453, 190,
                119.5122, 29.3454, 190,
                119.5123, 29.3456, 190,
                119.5124, 29.3457, 190,
                119.5125, 29.3458, 190,
                119.5126, 29.3460, 200,
                119.5127, 29.3461, 190,
                119.5128, 29.3462, 190,
                119.5129, 29.3463, 190,
                119.5130, 29.3465, 190,
                119.5131, 29.3466, 190,
                119.5132, 29.3467, 190,
                119.5133, 29.3469, 190,
                119.5134, 29.3470, 190,
                119.5135, 29.3471, 190,
                119.5136, 29.3473, 190,
                119.5136, 29.3474, 190,
                119.5137, 29.3475, 190,
                119.5138, 29.3476, 190,
                119.5139, 29.3478, 190,
                119.5140, 29.3479, 190,
                119.5141, 29.3480, 190,
                119.5142, 29.3482, 190,
                119.5143, 29.3483, 190,
                119.5144, 29.3484, 190,
                119.5145, 29.3486, 190,
                119.5146, 29.3487, 190,
                119.5147, 29.3488, 190,
                119.5148, 29.3489, 190,
                119.5149, 29.3491, 190,
                119.5150, 29.3492, 190,
                119.5151, 29.3493, 190,
                119.5151, 29.3495, 190,
                119.5152, 29.3496, 190,
                119.5153, 29.3497, 190,
                119.5154, 29.3498, 190,
                119.5155, 29.3500, 190,
                119.5156, 29.3501, 190,
                119.5157, 29.3502, 190,
                119.5158, 29.3503, 190,
                119.5159, 29.3505, 200,
                119.5160, 29.3506, 190,
                119.5161, 29.3507, 190,
                119.5162, 29.3509, 190,
                119.5163, 29.3510, 190,
                119.5164, 29.3511, 190,
                119.5165, 29.3512, 190,
                119.5166, 29.3514, 190,
                119.5167, 29.3515, 190,
                119.5167, 29.3516, 190,
                119.5168, 29.3518, 190,
                119.5169, 29.3519, 190,
                119.5170, 29.3520, 190,
                119.5171, 29.3522, 190,
                119.5172, 29.3523, 190,
                119.5173, 29.3524, 190,
                119.5174, 29.3525, 190,
                119.5175, 29.3527, 190,
                119.5176, 29.3528, 190,
                119.5177, 29.3529, 190,
                119.5178, 29.3531, 190,
                119.5179, 29.3532, 190,
                119.5180, 29.3533, 190,
                119.5181, 29.3534, 190,
                119.5182, 29.3536, 190,
                119.5182, 29.3537, 190,
                119.5183, 29.3538, 200,
                119.5184, 29.3540, 200,
                119.5185, 29.3541, 200,
                119.5186, 29.3542, 200,
                119.5186, 29.3544, 200,
                119.5187, 29.3545, 200,
                119.5188, 29.3546, 200,
                119.5189, 29.3548, 200,
                119.5190, 29.3549, 200,
                119.5190, 29.3550, 200,
                119.5191, 29.3552, 200,
                119.5192, 29.3553, 200
            ]),
            width: 5,
            material: new Cesium.PolylineOutlineMaterialProperty({
                color: Cesium.Color.ORANGE,
                outlineWidth: 2,
                outlineColor: Cesium.Color.BLACK
            })
        }
    });

    // start mark
    var redBox = viewer.entities.add({
        name: 'Red box with black outline',
        position: Cesium.Cartesian3.fromDegrees(119.5220, 29.3460, 200),
        box: {
            dimensions: new Cesium.Cartesian3(40.0, 30.0, 50.0),
            material: Cesium.Color.RED.withAlpha(0.5),
            outline: true,
            outlineColor: Cesium.Color.BLACK
        }
    });

    // 缩放到实体
    viewer.zoomTo(viewer.entities);
}

$('#id_get_data').click(function () {
    alert("test");
});


