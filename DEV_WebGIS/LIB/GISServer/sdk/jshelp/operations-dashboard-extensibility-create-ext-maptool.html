<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="content-language" content="en">
  <meta name="product" content="js-api-arcgis">
  <meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE">
  <meta name="sub_category" content="JavaScript API">
  <meta name="search-collection" content="help">
  <meta name="search-category" content="help-api,help-api-guide">
  <meta name="version" content="3.x">
  <meta name="content_type" content="Help Topic"> 
  <meta name="last-modified" content="2017-07-03"> 

  <link rel="stylesheet" href="../styles/screen.css">
  <link rel="stylesheet" href="../styles/jsdoc.css">
  <link rel="stylesheet" href="../styles/hljs-github.css">
  <link rel="stylesheet" href="../styles/homepage.css">
  <link rel="stylesheet" href="../styles/grid.css">
  <link rel="stylesheet" href="../styles/tree.css">
  <link rel="stylesheet" href="../prettify/prettify.css">
  <link rel="stylesheet" href="../styles/tailcoat-search.css">
  <link rel="stylesheet" href="//fast.fonts.com/cssapi/23855eec-5fdf-4594-9898-0113a04bfef0.css">
  <link rel="shortcut icon" href="../graphics/favicon.ico">

  <style>
    html {
      overflow-y: auto;
    }
    pre {
      font-size: 1.1em;
      line-height: normal;
      margin: 0;
    }
    #header nav li a {
      font-size: .875em;
    }
    #esri-logo {
      margin-left: 0;
    }
    h1.light {
      color: #fff;
    }
    .navigation-bar {
      background-image: url("../graphics/tailcoat/navigation-bar-background.jpg");
    }
  </style>
  <title>Create a map tool | Guide | ArcGIS API for JavaScript 3.21</title>
  
  
<script src="https://assets.adobedtm.com/2e9cd01e19dc5ac4867e752f17a2f1ea1923e5af/satelliteLib-0ed1001fd441a838aefe8e755be42aaafddcc46b.js"></script>


</head>

<body>
<header class="header">
  <div class="container">
    <nav class="site-nav">
        Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a>
    </nav>
  </div>
</header>
          
  <div class="navigation-bar ">  
    <div class="container">
      <header>
        <h1 class="light"><a href="..">ArcGIS API for JavaScript <sup>3.21</sup></a></h1>
      </header>
       <nav class="navigation-bar-nav">
        <ul>
            <li class=""><a href="../">Home</a></li>
            <li class="current"><a href=".">Guide</a></li>
            <li class=""><a href="../jsapi/">API Reference</a></li>
            <li class=""><a href="../jssamples/">Sample Code</a></li>
            <li class=""><a class="icon-share icon-link-external" href="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</a></li>
        </ul>
      </nav>
    </div>
  </div> 

<div class="container_12">
  <div class="grid_3 contentWrapper">
    <div id="toggleToc">
      <img src="../graphics/tochide.gif" alt=""> Hide Table of Contents
    </div>
    <div id="apiToc"><div class="treeDiv" id="tree" style="top: 35px; left: 0px;">
  <div id="treeRoot">
    <div class="treeNode">
      <a class="treeUnselected" href="." onclick="clickAnchor(this)">Overview</a>
    </div>
    <div class="treeNode">
      <a class="treeUnselected" href="whats_new.html" onclick="clickAnchor(this)">What's New in Version 3.21</a>
    </div>
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Tutorials</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="intro_firstmap_amd.html" onclick="clickAnchor(this)">Build your first application</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_agstemplate_amd.html" onclick="clickAnchor(this)">Use an ArcGIS.com webmap</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_dev.html" onclick="clickAnchor(this)">Mobile-specific application</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_directions.html" onclick="clickAnchor(this)">Directions widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="tutorial_search.html" onclick="clickAnchor(this)">Search widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="tutorial_label_layer.html" onclick="clickAnchor(this)">Labeling features client-side</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_javascript_classes.html" onclick="clickAnchor(this)">Write a class</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_custom_dijit.html" onclick="clickAnchor(this)">Create a re-usable widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="tutorial_sharing_maps_secure_layers.html" onclick="clickAnchor(this)">Share maps with secure layers</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">About the API</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="intro_gettingstarted.html" onclick="clickAnchor(this)">Get Started</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_accessapi.html" onclick="clickAnchor(this)">Get the API</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="localization.html" onclick="clickAnchor(this)">Localization</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="css.html" onclick="clickAnchor(this)">Required CSS</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="supported_browsers.html" onclick="clickAnchor(this)">Supported Browsers</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="community.html" onclick="clickAnchor(this)">Community</a>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Dojo
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojo.html" onclick="clickAnchor(this)">Work with Dojo</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojoversion.html" onclick="clickAnchor(this)">Get Dojo</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojodijits.html" onclick="clickAnchor(this)">Dijits</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojo_amd.html" onclick="clickAnchor(this)">Dojo and AMD</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojoLayouts.html" onclick="clickAnchor(this)">Dojo Layouts</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojohelp.html" onclick="clickAnchor(this)">Additional resources</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="why_dojo.html" onclick="clickAnchor(this)">Why Dojo?</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        Work with the API
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="inside_defaults.html" onclick="clickAnchor(this)">Default API configurations</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_bundle.html" onclick="clickAnchor(this)">Default API strings</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_esri_request.html" onclick="clickAnchor(this)">Retrieve data from a web server</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_navigation.html" onclick="clickAnchor(this)">Map navigation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_events.html" onclick="clickAnchor(this)">Events</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_extents.html" onclick="clickAnchor(this)">Set Extents</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_editing.html" onclick="clickAnchor(this)">Editing</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="arcade.html" onclick="clickAnchor(this)">Arcade</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_temporal.html" onclick="clickAnchor(this)">Time aware data</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_firsttask.html" onclick="clickAnchor(this)">Adding a task</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_querytask.html" onclick="clickAnchor(this)">Using QueryTask</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_custom_layers.html" onclick="clickAnchor(this)">Creating custom layer types</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_webmap.html" onclick="clickAnchor(this)">Web maps</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_analysiswidgets.html" onclick="clickAnchor(this)">Working with Analysis Widgets</a>
        </div>
        <div class="treeNode">
        <a class="treeUnselected" href="intro_search_widget.html" onclick="clickAnchor(this)">Working with the Search Widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_directions_widget.html" onclick="clickAnchor(this)">Working with the Directions Widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_geoenrichment.html" onclick="clickAnchor(this)">Working with GeoEnrichment Widgets</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_datareviewer.html" onclick="clickAnchor(this)">Working with DataReviewer</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_locationproviders.html" onclick="clickAnchor(this)">Location Providers (beta)</a>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Graphics and feature layers</span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="inside_graphics.html" onclick="clickAnchor(this)">Graphics overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_feature_layers.html" onclick="clickAnchor(this)">Feature layer overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_renderers.html" onclick="clickAnchor(this)">Symbols and renderers</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_bettermaps.html" onclick="clickAnchor(this)">Data Visualization</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_styling_svg.html" onclick="clickAnchor(this)">Styling features with CSS</a>
            </div>
          </div>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Popups and Info Windows
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="intro_infowindow.html" onclick="clickAnchor(this)">Info windows and graphics</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_formatinfowindow.html" onclick="clickAnchor(this)">Format info window content</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_customize.html" onclick="clickAnchor(this)">Customize info windows</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_agspopup.html" onclick="clickAnchor(this)">Popup overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_popuptemplate.html" onclick="clickAnchor(this)">Format popup content</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_customizepopup.html" onclick="clickAnchor(this)">Customize popup</a>
            </div>
          </div>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Geoprocessor
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_overview.html" onclick="clickAnchor(this)">Geoprocessing overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_creating.html" onclick="clickAnchor(this)">Creating the geoprocessor</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_parameters.html" onclick="clickAnchor(this)">Geoprocessor parameters</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_running.html" onclick="clickAnchor(this)">Geoprocessing results</a>
            </div>
          </div>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Operations Dashboard
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="operations-dashboard-extensibility-overview.html" onclick="clickAnchor(this)">Overview</a>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Get started
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-getstarted-setup-dev-env.html" onclick="clickAnchor(this)">Set up a development environment</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-getstarted-samples.html" onclick="clickAnchor(this)">Samples</a>
                </div>
              </div>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Create extensions
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-overview.html" onclick="clickAnchor(this)">Overview of widgets, map tools and feature actions</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-widget.html" onclick="clickAnchor(this)">Create a widget</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-maptool.html" onclick="clickAnchor(this)">Create a map tool</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-configurable.html" onclick="clickAnchor(this)">Create a configurable extension</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-manifest.html" onclick="clickAnchor(this)">Manifest</a>
                </div>
              </div>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Test and debug
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-test-debug.html" onclick="clickAnchor(this)">Test and debug in Operations Dashboard</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-troubleshooting.html" onclick="clickAnchor(this)">Troubleshooting</a>
                </div>
              </div>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Deploy
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-overview.html" onclick="clickAnchor(this)">Overview of deploying extensions</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-setup-web-server.html" onclick="clickAnchor(this)">Set up a web server</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-register-ext.html" onclick="clickAnchor(this)">Register an extension</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-update-ext.html" onclick="clickAnchor(this)">Update an extension</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Mobile</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_viewport.html" onclick="clickAnchor(this)">Viewport Settings</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_hardware.html" onclick="clickAnchor(this)">Device Detection and Browser Sniffing</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_orientation.html" onclick="clickAnchor(this)">Device Orientation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_geolocation.html" onclick="clickAnchor(this)">Geolocation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_frameworks.html" onclick="clickAnchor(this)">Frameworks</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_phonegap.html" onclick="clickAnchor(this)">Using PhoneGap</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_references.html" onclick="clickAnchor(this)">References</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        ArcGIS Server Services
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="ags_overview.html" onclick="clickAnchor(this)">Overview</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_rest.html" onclick="clickAnchor(this)">Services directory and the REST API</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_secureservices.html" onclick="clickAnchor(this)">Working with secure resources</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_proxy.html" onclick="clickAnchor(this)">Using the proxy page</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        References
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="inside_web_optimizer.html" onclick="clickAnchor(this)">Using the Web Optimizer</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_bower_custom_builds.html" onclick="clickAnchor(this)">Using Bower for Custom Builds</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="limits_for_graphics.html" onclick="clickAnchor(this)">Determine limits for map graphics</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="best_practices_feature_layers.html" onclick="clickAnchor(this)">Feature layer best practices</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_guidelines.html" onclick="clickAnchor(this)">Coding guidelines</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ref_coordsystems.html" onclick="clickAnchor(this)">Coordinate system IDs</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_faq.html" onclick="clickAnchor(this)">Frequently asked questions</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        What's New archive
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="migration_30.html" onclick="clickAnchor(this)">Migrating to 3.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="migration_20.html" onclick="clickAnchor(this)">Migrating to 2.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v319.html" onclick="clickAnchor(this)">What's New in Version 3.20</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v319.html" onclick="clickAnchor(this)">What's New in Version 3.19</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v318.html" onclick="clickAnchor(this)">What's New in Version 3.18</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v317.html" onclick="clickAnchor(this)">What's New in Version 3.17</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v316.html" onclick="clickAnchor(this)">What's New in Version 3.16</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v315.html" onclick="clickAnchor(this)">What's New in Version 3.15</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v314.html" onclick="clickAnchor(this)">What's New in Version 3.14</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v313.html" onclick="clickAnchor(this)">What's New in Version 3.13</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v312.html" onclick="clickAnchor(this)">What's New in Version 3.12</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v311.html" onclick="clickAnchor(this)">What's New in Version 3.11</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v310.html" onclick="clickAnchor(this)">What's New in Version 3.10</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v39.html" onclick="clickAnchor(this)">What's New in Version 3.9</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v38.html" onclick="clickAnchor(this)">What's New in Version 3.8</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v37.html" onclick="clickAnchor(this)">What's New in Version 3.7</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v36.html" onclick="clickAnchor(this)">What's New in Version 3.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v35.html" onclick="clickAnchor(this)">What's New in Version 3.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v34.html" onclick="clickAnchor(this)">What's New in Version 3.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v33.html" onclick="clickAnchor(this)">What's New in Version 3.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v32.html" onclick="clickAnchor(this)">What's New in Version 3.2</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v31.html" onclick="clickAnchor(this)">What's New in Version 3.1</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v30.html" onclick="clickAnchor(this)">What's New in Version 3.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v28.html" onclick="clickAnchor(this)">What's New in Version 2.8</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v27.html" onclick="clickAnchor(this)">What's New in Version 2.7</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v26.html" onclick="clickAnchor(this)">What's New in Version 2.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v25.html" onclick="clickAnchor(this)">What's New in Version 2.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v24.html" onclick="clickAnchor(this)">What's New in Version 2.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v23.html" onclick="clickAnchor(this)">What's New in Version 2.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v22.html" onclick="clickAnchor(this)">What's New in Version 2.2</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v21.html" onclick="clickAnchor(this)">What's New in Version 2.1</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v20.html" onclick="clickAnchor(this)">What's New in Version 2.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v16.html" onclick="clickAnchor(this)">What's New in Version 1.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v15.html" onclick="clickAnchor(this)">What's New in Version 1.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v14.html" onclick="clickAnchor(this)">What's New in Version 1.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v13.html" onclick="clickAnchor(this)">What's New in Version 1.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v12.html" onclick="clickAnchor(this)">What's New in Version 1.2</a>
        </div>
      </div>
    </div>
    
  </div>
</div></div> 
  </div>
  <div class="grid_9 contentWrapper">
    <div id="topicPane"><div id="pageBanner">Create a map tool</div>
<div id="nstext">

  
  <p>A map tool in an operation view allows users to interact with a map widget. For example, the measure tool
    allows users to find the length or area of a shape that they define on a map widget. In this tutorial,
    you'll develop, style, and test a buffer map tool. The map tool calculates and displays buffer rings around a point drawn on the map.</p>

  <p><img src="images/operations-dashboard/create-ext-maptool-completed-map.png" alt="Completed map tool"/></p>
  <a href="https://github.com/Esri/dashboard-samples/tree/master/bufferMapTool">View tutorial files</a>

  <p>Before you begin, you must <a title="Set up a dev environment"
                                   href="operations-dashboard-extensibility-getstarted-setup-dev-env.html"
                                   target="_blank">set up your development environment</a> for Windows Operations Dashboard and prepare it to run in developer mode.&nbsp;</p>

  <h3>Create files for the map tool</h3>

  <p>In the extensions folder that you created in the <a title="Set up a dev environment"
                                                             href="operations-dashboard-extensibility-getstarted-setup-dev-env.html"
                                                             target="_blank">Set up a development environment</a>
    tutorial, create a folder called bufferMapTool, and create the following files in that folder:</p>
  <ul>
    <li>buffer.json&mdash;The manifest file for the extension. A JSON file that describes how the extension
      should be activated and used in an operation view.
    </li>
    <li>buffer.html&mdash;An HTML5 file that represents the UI of the map tool that will
      load when the tool finishes initialization.
    </li>
    <li>bufferMapToolTemplate.html&mdash;An HTML fragment included in the buffer.html
      file. The template contains details of the map tool&rsquo;s UI, and its business logic is included in the
      BufferMapTool.js file.
    </li>
    <li>BufferMapTool.js&mdash;A JavaScript file that defines the buffer map tool class, which will be created as
      a Dojo widget, or a <a
        href="http://dojotoolkit.org/reference-guide/1.10/dijit/info.html#dijit-info">dijit</a> (the
      term "widget" here has no association with the concept of widgets in Operations Dashboard). A map tool dijit
      is created each time a user clicks on it from the map toolbar.
    </li>
    <li>style.css&mdash;A CSS file that defines the style of the map tool.</li>
    <li>icon.png&mdash;A 16px by 16px PNG (or JPG) image file that will be the icon of the map tool.
    </li>
    <li>pushpin.png&mdash;A PNG (or JPG) image file that indicates the location the user clicked on the map.
      The recommended size of the file is 15px by 30px.
    </li>
  </ul>
  <p><strong>Note</strong>: You can assign different names to the above files.</p>

  <h3>Configure the manifest</h3>

  <p>Open the buffer.json file, or the manifest file, in your IDE and add the following text:</p>

  <div class="detailSample">
<pre class="prettyprint">{
  "type": "Map Tool",
  "title": "Buffer Map Tool",
  "description": "A map tool that creates buffers from a clicked point",
  "usePortalServices": true,
  "runtime": {
    "iconPath": "icon.png",
    "path": "buffer.html",
    "viewType": "toolbar"
  },
  "credits": "By Esri (http://www.esri.com)"
}
</pre>
  </div>
  <p>Note:</p>
  <ul>
    <li>The <b>type</b> property determines the type of the extension, in this case, the extension is a map tool.
      Make sure the capitalization and the spelling of the words "Map Tool" are exactly the same as shown in the sample above,
      otherwise the tool will not load.
    </li>
    <li>The <b>usePortalServices</b> property indicates whether an extension will use any <a
      href="https://doc.arcgis.com/en/arcgis-online/administer/configure-services.htm">utility services</a>
      such as the geometry service configured for the organization.
      <p><strong>Note: </strong>For this map tool to work, this property must be set to true.</p>
    </li>
    <li>The <b>runtime</b> object describes the icon (icon.png) and the UI (buffer.html) of the map tool. Their paths are
      relative to that of the manifest file. The <b>"viewType"</b> property indicates the type of map tool. In this
      case, the default map toolbar is replaced with a custom toolbar.
    </li>
  </ul>
  <p>To learn more about the manifest file properties, see <a
    href="operations-dashboard-extensibility-create-ext-manifest.html" target="_blank">Manifest file</a>.</p>

  <h3>Create the user interface</h3>
  <ol>
    <li>Open the buffer.html file, and add the following text to set up the basic structure of the HTML5 file:
      <div class="detailSample">
<pre class="prettyprint">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset=utf-8"&gt;
    &lt;link rel="stylesheet" type="text/css" href="style.css"&gt;
   &lt;/head&gt;<br/>&lt;body&gt;<br/>&lt;/body&gt;
&lt;/html&gt;</pre>
      </div>
    </li>
    <li>Between the <code>&lt;body&gt;</code> tags, create a <code>&lt;div&gt;</code> and add a data-dojo-type
      attribute with the value extension/BufferMapTool. This attribute is used to instantiate an
      extension/BufferMapTool object that comes from the buffer map tool dijit you'll create in the
      BufferMapTool.js file.
      <div class="detailSample">
        <pre class="prettyprint">&lt;body&gt;<br/> &lt;div data-dojo-type="extension/BufferMapTool"&gt;&lt;/div&gt;<br/>&lt;/body&gt;</pre>
      </div>
    </li>
    <li>Open the bufferMapToolTemplate.html file, and add the following HTML fragment. It defines the UI of the buffer
      tool dijit. The UI consists of a label and a <b>Done</b> button. The button has a data-dojo-attach-event attribute that
      attaches the button to the deactivateMapTool method that will be defined in the BufferMapTool.js file.
    </li>
  </ol>
  <div class="detailSample">
    <pre class="prettyprint" style="margin-left: 60px;">&lt;div class="table"&gt;<br/> &nbsp; &lt;div class="table-cell labelContainer"&gt;<br/> &nbsp;&nbsp;&nbsp; Click on the map to create three buffers for the clicked location.<br/> &nbsp; &lt;/div&gt;<br/> &nbsp; &lt;div class="table-cell buttonContainer"&gt;<br/> &nbsp;&nbsp;&nbsp; &lt;button data-dojo-attach-event="onClick:deactivateMapTool"&gt;Done&lt;/button&gt;<br/> &nbsp; &lt;/div&gt;<br/> &lt;/div&gt;</pre>
  </div>
  <h3>Add programming logic</h3>
  <ol>
    <li>Open the buffer.html file and insert the following <code>&lt;script&gt;</code> block before the closing
      <code>&lt;body&gt;</code> tag. The script block contains the dojoConfig object that will load the buffer tool
      dijit. To learn more about dojoConfig, see Dojo Toolkit documentation.
      <p>
      <div class="detailSample">
          <pre class="prettyprint">
&lt;script&gt;
  var dojoConfig = {
    async: true,
    paths: {
      "extension": location.pathname.replace(/\/[^/]+$/, '')
    }
  };
&lt;/script&gt;
          </pre>
      </div>
      <strong>Note</strong>: Within the paths object, the URI of the extension folder is referenced
      as "extension". This is used to construct the relative path to the buffer tool dijit (that is,
      extension/BufferMapTool) in the dojo-data-type attribute of the <code>&lt;div&gt;</code> element in this
      file.
      </p>
    </li>
    <li>Under the <code>&lt;script&gt;</code> block from the previous step, add another <code>&lt;script&gt;</code> block
      referencing the ArcGIS API for JavaScript. You must load the dojoConfig before loading the ArcGIS API for
      JavaScript, otherwise the dojoConfig will be ignored.
      <div class="detailSample">
                        <pre class="prettyprint">
&lt;script src="//js.arcgis.com/3.21/"&gt;&lt;/script&gt;
                        </pre>
          </div>
    </li>
	<li>
		Inside of another <code>&lt;script&gt;</code> block, add the Dojo parser:
		<div class="detailSample">
                        <pre class="prettyprint">
&lt;script&gt; 
	require(["dojo/parser","dojo/domReady!"]
		, function(parser){
		parser.parse();
          });
&lt;/script&gt;
                        </pre>
          </div>
		</li>
    <li>Open the BufferMapTool.js file, and add a <code>define</code> function. This will be used to define the buffer
      map tool dijit. This function loads the dependent modules and passes the modules as parameters in a callback function.
      <div class="detailSample">
<pre class="prettyprint">
define([
  "dojo/_base/declare",
  "dojo/_base/lang",
  "dijit/_WidgetBase",
  "dijit/_TemplatedMixin",
  "esri/opsdashboard/MapToolProxy",
  "esri/tasks/BufferParameters",
  "esri/tasks/GeometryService",
  "esri/Color",
  "esri/symbols/SimpleLineSymbol",
  "esri/symbols/SimpleFillSymbol",
  "esri/symbols/PictureMarkerSymbol",
  "esri/graphic",
  "dojo/text!./bufferMapToolTemplate.html"
], function (declare, lang, _WidgetBase, _TemplatedMixin,
  MapToolProxy, BufferParameters, GeometryService, Color,
  SimpleLineSymbol, SimpleFillSymbol, PictureMarkerSymbol, Graphic, templateString
) {

});
</pre>
      </div>
    </li>
    <li>Declare a class name BufferMapTool. The second parameter is an array of super
      classes that are inherited by the buffer class. The third parameter is an object that contains the methods
      to be called throughout the lifecycle of the class.
      <div class="detailSample">
<pre class="prettyprint">...
  "dojo/text!extension/bufferMapToolTemplate.html"
], function (declare, lang, _WidgetBase, _TemplatedMixin,
MapToolProxy, BufferParameters, GeometryService, Color, SimpleLineSymbol, SimpleFillSymbol, PictureMarkerSymbol, Graphic, templateString
) {
  return declare("BufferMapTool", [_WidgetBase, _TemplatedMixin, MapToolProxy], {

  });
});
</pre>
      </div>
    </li>
    <li>In the BufferMapTool class, load the bufferMapToolTemplate.html into the templateString as an inline string.
      <div class="detailSample">
<pre class="prettyprint">return declare("BufferMapTool", [_WidgetBase, _TemplatedMixin, MapToolProxy], {
  templateString: templateString,
});</pre>
      </div>
    </li>
    <li>Insert the constructor function under the template string.
      <div class="detailSample">
<pre class="prettyprint">constructor: function () {

  // The buffer parameters
  this.bufferParams = new BufferParameters();
  this.bufferParams.unit = GeometryService.UNIT_METER;
  this.bufferParams.distances = [500, 1000, 2000];

  // Create the graphic for the push pin
  var iconPath = location.href.replace(/\/[^/]+$/, '/');
  var symbol = new PictureMarkerSymbol(iconPath + "pushpin.png", 15, 30);
  symbol.yoffset = 10;
  this.pushPinGraphic = new Graphic(null, symbol);

  // Create the buffer graphics
  var outlineSymbol = new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color("#000000"), 1);
  var bufferSymbol = new SimpleFillSymbol(SimpleLineSymbol.STYLE_SOLID, outlineSymbol, null);
  this.bufferGraphics = [];
  for (var i = 0; i &lt; 3; i++) {
    this.bufferGraphics.push(new Graphic(null, bufferSymbol));
  }
},
</pre>
      </div>
      You have now created the following variables in the constructor:
      <ul>
        <li>bufferParams&mdash;An object that captures the configuration options of the buffer rings to be created,
          such as the radii of the buffers from the point drawn on the map.
        </li>
        <li>pushPinGraphic&mdash;A graphic for the point drawn on the map.</li>
        <li>bufferGraphics&mdash;Three graphics for the buffer rings.</li>
      </ul>
    </li>
    <li>After adding the constructor function, insert the hostReady callback function. This callback will be
      invoked when Operations Dashboard signals to the extension that the relationship between them is
      established.
      <div class="detailSample">
<pre class="prettyprint">hostReady: function () {
  //Set up the UI of the map tool and create the graphics layer
  //when the host (Operations Dashboard) is ready

  // Retrieve the geometry service specified for the organization
  // Note: The buffer.json manifest file must have the "usePortalServices" set to true
  // in order for the geometry service (and any other helper services) to be retrieved
  if (!this.portalHelperServices || !this.portalHelperServices.geometry) {
    alert("Cannot get the geometry service required for creating buffers.");
    this.deactivateMapTool();
    return;
  }

  // Update the buffer params with the target map widget spatial reference
  this.bufferParams.outSpatialReference = this.mapWidgetProxy.spatialReference;

  // Setup a geometry service
  this.geometryService = new GeometryService(this.portalHelperServices.geometry.url);

  // Update the size of the user experience
  this.setDisplaySize({
    width: Math.min(this.availableDisplaySize.width / 2, 400),
    height: 40
  });

  // Creates two graphics layers to control the order of draw buffers below the pushpin.
  return this.mapWidgetProxy.createGraphicsLayerProxy().then(lang.hitch(this, function (graphicsLayerProxy) {

    this.bufferGraphicsLayerProxy = graphicsLayerProxy;

    return this.mapWidgetProxy.createGraphicsLayerProxy().then(lang.hitch(this, function (graphicsLayerProxy) {
      this.pushPinGraphicsLayerProxy = graphicsLayerProxy;

      // Activate the drawing activity when the graphics layer is ready
      this.activateMapDrawing({geometryType: "point"});
    }));
  }));
},
</pre>
      </div>
      This callback performs the following:
      <ul>
        <li>Gets the geometry service from the ArcGIS organization, which will be used to calculate the buffer
          rings.
        </li>
        <li>Sets the outSpatialReference in the bufferParams object.</li>
        <li>Specifies the dimension of the map toolbar.</li>
        <li>Calls the map widget's createGraphicsLayerProxy function twice to create two temporary graphics
          layers, one representing the clicked point and one representing the buffer rings.
        </li>
      </ul>
    </li>
    <li>After creating the hostReady callback, add an availableDisplaySizeChanged function. If the width of the
      map widget associated with the map tool changes, the width of the map tool dijit will be readjusted.
      <div class="detailSample">
<pre class="prettyprint">availableDisplaySizeChanged: function (availableSize) {
  // Update the size of the user experience
  this.setDisplaySize({
    width: Math.min(availableSize.width / 2, 400),
    height: 40
  });
},
</pre>
      </div>
    </li>
    <li>Add the mapDrawComplete callback function. This function will be invoked when a user draws a point on the
      map. It clears any graphics that were previously created after drawing a point, and passes
      the geometry of the clicked point to the showPushPin and
      showBuffers functions. The graphics of the pushpin and the buffer rings display on the map.
      <div class="detailSample">
<pre class="prettyprint">mapDrawComplete: function (geometry) {
  // When the drawing activity has been performed by the user, use the resulting geometry
  // to calculate the buffer rings and display them on the map
  if (!geometry)
    return;

  // Clear the graphics layer.
  this.bufferGraphicsLayerProxy.clear();
  this.pushPinGraphicsLayerProxy.clear();

  // Immediately show a feedback for the user
  this.showPushPin(geometry);

  // Starts the buffering process
  this.showBuffers(geometry);
},
</pre>
      </div>
    </li>
    <li>Add the showPushPin function. This function sets the geometry of the pushPinGraphic using the point
      drawn on the map and updates the pushpin's graphicsLayer.
      <div class="detailSample">
<pre class="prettyprint">showPushPin: function (geometry) {

  // Update the position of the push pin graphic
  this.pushPinGraphic.setGeometry(geometry);

  // Update the host graphics layer
  this.pushPinGraphicsLayerProxy.addOrUpdateGraphic(this.pushPinGraphic);
},
</pre>
      </div>
    </li>
    <li>Add the showBuffers function. This function calls the buffer function of the geometryService object
      by passing in the buffer parameters and a callback function. The buffer function calculates the
      geometries of the buffer rings. These geometries are used in the callback to update the buffer graphics and
      their graphics layer.
      <div class="detailSample">
<pre class="prettyprint">showBuffers: function (geometry) {

  // Use the geometry service to calculate 3 buffer rings around the clicked point

  // Update the buffer params
  this.bufferParams.geometries = [geometry];

  // When the buffer rings have been calculated, call this.onBufferResult to update the graphics
  this.geometryService.buffer(this.bufferParams, lang.hitch(this, function (geometries) {

    if (!geometries || geometries.length === 0)
      return;

    // For each of the buffer geometries, update the buffer graphics
    for (var i = 0; i &lt; geometries.length; i++) {
      this.bufferGraphics[i].setGeometry(geometries[i]);
    }

    // Update the host graphics layer
    this.bufferGraphicsLayerProxy.addOrUpdateGraphics(this.bufferGraphics);
  }));
},
</pre>
      </div>
    </li>
    <li>Finally, add the deactivateMapTool function. This tear-down function will be
      called to deactivate the map drawing session and to destroy the two graphics layers when a user clicks the <b>Done</b>
      button defined in the bufferMapToolTemplate.html file.
      <br/><strong>Note</strong>: It is important to destroy any graphics layers that were created in this
      function.
      <div class="detailSample">
<pre class="prettyprint">deactivateMapTool: function () {
  // Deactivate the map tool when the Done button is clicked
  // Clean up then deactivating
  this.deactivateMapDrawing();
  this.mapWidgetProxy.destroyGraphicsLayerProxy(this.bufferGraphicsLayerProxy);
  this.mapWidgetProxy.destroyGraphicsLayerProxy(this.pushPinGraphicsLayerProxy);

  // Call the base function
  this.inherited(arguments, []);
}
</pre>
      </div>
      Your code for the BufferMapTool.js file should look like this:
      <div class="detailSample">
<pre class="prettyprint">define([
  "dojo/_base/declare",
  "dojo/_base/lang",
  "dijit/_WidgetBase",
  "dijit/_TemplatedMixin",
  "esri/opsdashboard/MapToolProxy",
  "esri/tasks/BufferParameters",
  "esri/tasks/GeometryService",
  "esri/Color",
  "esri/symbols/SimpleLineSymbol",
  "esri/symbols/SimpleFillSymbol",
  "esri/symbols/PictureMarkerSymbol",
  "esri/graphic",
  "dojo/text!./bufferMapToolTemplate.html"
], function (declare, lang, _WidgetBase, _TemplatedMixin, MapToolProxy, BufferParameters,
             GeometryService, Color, SimpleLineSymbol, SimpleFillSymbol, PictureMark-erSymbol,
             Graphic, templateString) {

  return declare("BufferMapTool", [_WidgetBase, _TemplatedMixin, MapToolProxy], {

    templateString: templateString,

    constructor: function () {

      // The buffer parameters
      this.bufferParams = new BufferParameters();
      this.bufferParams.unit = GeometryService.UNIT_METER;
      this.bufferParams.distances = [500, 1000, 2000];

      // Create the graphic for the push pin
      var iconPath = location.href.replace(/\/[^/]+$/, '/');
      var symbol = new PictureMarkerSymbol(iconPath + "pushpin.png", 15, 30);
      symbol.yoffset = 10;
      this.pushPinGraphic = new Graphic(null, symbol);

      // Create the buffer graphics
      var outlineSymbol = new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color("#000000"), 1);
      var bufferSymbol = new SimpleFillSymbol(SimpleLineSymbol.STYLE_SOLID, outlineSymbol, null);
      this.bufferGraphics = [];
      for (var i = 0; i &lt; 3; i++) {
        this.bufferGraphics.push(new Graphic(null, bufferSymbol));
      }
    },

    hostReady: function () {
      //Set up the UI of the map tool and create the graphics layer
      //when the host (Operations Dashboard) is ready

      // Retrieve the geometry service specified for the organization
      // Note: The buffer.json manifest file must have the "usePortalServices" set to true
      // in order for the geometry service (and any other helper services) to be retrieved
      if (!this.portalHelperServices || !this.portalHelperServices.geometry) {
        alert("Cannot get the geometry service required for creating buffers.");
        this.deactivateMapTool();
        return;
      }

      // Update the buffer params with the target map widget spatial reference
      this.bufferParams.outSpatialReference = this.mapWidgetProxy.spatialReference;

      // Set up a geometry service
      this.geometryService = new GeometryService(this.portalHelperServices.geometry.url);

      // Update the size of the user experience
      this.setDisplaySize({
        width: Math.min(this.availableDisplaySize.width / 2, 400),
        height: 40
      });

      // Creates two graphics layers to control the order of draw buffers below the push-pin.
      return this.mapWidgetProxy.createGraphicsLayerProxy().then(lang.hitch(this, function (graphicsLayerProxy) {

        this.bufferGraphicsLayerProxy = graphicsLayerProxy;

        return this.mapWidgetProxy.createGraphicsLayerProxy().then(lang.hitch(this, function (graphicsLayerProxy) {
          this.pushPinGraphicsLayerProxy = graphicsLayerProxy;

          // Activate the drawing activity when the graphics layer is ready
          this.activateMapDrawing({geometryType: "point"});
        }));
      }));
    },

    availableDisplaySizeChanged: function (availableSize) {
      // Update the size of the user experience
      this.setDisplaySize({
        width: Math.min(availableSize.width / 2, 400),
        height: 40
      });
    },

    mapDrawComplete: function (geometry) {
      // When the drawing activity have been performed by the user, use the resulting geometry
      // to calculate the buffer rings and display them on the map
      if (!geometry)
        return;

      // Clear the graphics layer.
      this.bufferGraphicsLayerProxy.clear();
      this.pushPinGraphicsLayerProxy.clear();

      // Immediately show a feedback for the user
      this.showPushPin(geometry);

      // Starts the buffering process
      this.showBuffers(geometry);
    },

    showPushPin: function (geometry) {

      // Update the position of the push pin graphic
      this.pushPinGraphic.setGeometry(geometry);

      // Update the host graphics layer
      this.pushPinGraphicsLayerProxy.addOrUpdateGraphic(this.pushPinGraphic);
    },

    showBuffers: function (geometry) {

      // Use the geometry service to calculate 3 buffer rings around the clicked point

      // Update the buffer params
      this.bufferParams.geometries = [geometry];

      // When the buffer rings have been calculated, call this.onBufferResult to update the graphics
      this.geometryService.buffer(this.bufferParams, lang.hitch(this, function (geometries) {

        if (!geometries || geometries.length === 0)
          return;

        // For each of the buffer geometries, update the buffer graphics
        for (var i = 0; i &lt; geometries.length; i++) {
          this.bufferGraphics[i].setGeometry(geometries[i]);
        }

        // Update the host graphics layer
        this.bufferGraphicsLayerProxy.addOrUpdateGraphics(this.bufferGraphics);
      }));
    },

    deactivateMapTool: function () {
      // Deactivate the map tool when the Done button is clicked
      // Clean up then deactivating
      this.deactivateMapDrawing();
      this.mapWidgetProxy.destroyGraphicsLayerProxy(this.bufferGraphicsLayerProxy);
      this.mapWidgetProxy.destroyGraphicsLayerProxy(this.pushPinGraphicsLayerProxy);

      // Call the base function
      this.inherited(arguments, []);
    }
  });
});
</pre>
      </div>
    </li>
  </ol>
  <h3>Update the style</h3>

  <p>With the map tool's UI and logic in place, add the following text to the style.css file to customize the look and feel of the extension:</p>

  <div class="detailSample">
<pre class="prettyprint">html, body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.table {
  display: table;
  width: 100%;
  height: 100%;
}

.table-cell {
  display: table-cell;
  vertical-align: middle;
  padding: 5px;
}

.labelContainer {
  font-family: Arial;
  font-size: 12px;
  width: 100%;
}

.buttonContainer {
  width: 20px;
}
</pre>
  </div>
  <p>Your extension is now ready for testing in Operations Dashboard.</p>

  <h3>Create an operation view</h3>
  <ol>
    <li>Start Operations Dashboard in <a href="operations-dashboard-extensibility-getstarted-setup-dev-env.html"
                                         target="_blank">developer mode</a>, and sign in to your ArcGIS organization as
      either a publisher or an administrator.
    </li>
    <li>Create a single-display operation view and choose a map. If you create a multi-display operation view,
      you can only open it in the Windows app, and you won't be able to debug your extension in the web browser.
      <p><strong>Note</strong>: To learn more about creating an operation view, see
        <a href="http://doc.arcgis.com/en/operations-dashboard/windows-desktop/author/create-an-operation-view.htm">
          Create an operation view</a>.</p>
    </li>
    <li>Click the <b>Add, remove, and configure map tools</b> button at the upper left corner of the map. The
      <b>Configure map tools</b> dialog box displays.
      <p><img src="images/operations-dashboard/create-ext-maptool-configure-map-tools.png"
              alt="Configure map tools"/></p>
    </li>
    <li>Click the <b>Custom</b> button to display the custom map tools. While in developer mode,
      your extensions can be identified by a red bounding box to help you distinguish them from the extensions created
      for the production environment.

      <p><img src="images/operations-dashboard/create-ext-maptool-configure-tools-settings.png"
              alt="Configure map tools dialog box"/></p>
    </li>
    <li>
      Click the check box next to the buffer map tool, and click <b>Close</b>.

      <p>The map tool is now included in the map toolbar.</p>
    </li>
    <li>Click the buffer tool on the map toolbar. An instance of the buffer tool dijit will be created and the
      HTML template will load.
    </li>
    <li>Click anywhere on the map to display buffer rings around the point you clicked.</li>
  </ol>
  <h3>Debug your map tool</h3>
  <p>If you need to debug your extension, you can use the Operations Dashboard extension debugger.</p>
  <ol>
    <li>Click the <b>Debug</b> button at the top of the buffer map toolbar to launch the debugger.

      <p><img src="images/operations-dashboard/create-ext-maptool-debug-button.png" alt="Debug button"/></p>

      <p><strong>Tip</strong>: You can also click <b>Dev Mode</b> in the upper right corner of the app, and
        click <b>Open Debug Tool</b> to launch the debugger.</p>
    </li>
    <li>Using the debugger, inspect the UI elements of the buffer.html file, or set break points to
      step through the business logic in the BufferMapTool.js file.
      <p><strong>Note</strong>: The URL displayed at the top of the debugger window
        starts from localhost:&lt;port number&gt; because the extension is running from a local server.
      </p>

      <p><img src="images/operations-dashboard/create-ext-maptool-debug-window.png" alt="Debug window"/></p>

      <p>
        <strong>Tip: </strong>       If you make a change to the HTML or JavaScript files during debugging, you can click the
        <b>Refresh</b> button <img src="images/operations-dashboard/create-ext-maptool-debug-refresh.png"
                                   alt="Refresh button"/> at the upper left corner of the debugger to see the update.
        However, if you make any changes to the manifest, you will need to close and reopen the operation view.
      </p>

      <p>To debug your extension using the web browser, complete the following steps:</p>
    </li>
    <li>Save your operation view.
    </li>
    <li>Click <b>Dev Mode</b> in the upper right corner and choose <b>Open in Browser</b>.
      <p><img src="images/operations-dashboard/create-ext-maptool-open-view-in-browser.png"
           alt="Open operation view in a browser"/></p>
      <p>The operation view will open in your default browser.</p>
    </li>
    <li>Use the built-in debugging tool of your browser to debug your map tool.<br/>
      <p><strong>Note</strong>: Since you're hosting your extension in the local server, you need to keep the
        Windows app and the local server running.</p>
    </li>
  </ol>
  
</div>
 <div id="wh_footer" class="footnote">
  <!--<a href="mailto:js_feedback@esri.com?subject=Feedback%20on%203.21%20Guide:%20jshelp/operations-dashboard-extensibility-create-ext-maptool.html">Report an error on this page</a>.
  <br>-->
  <a href="http://www.esri.com/legal/copyright-trademarks">Copyright &copy; 2017 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="https://developers.arcgis.com/en/terms/faq/">Terms of use</a>
</div>
</div> 
  </div>
</div> 


<script src="../scripts/tree.js"></script>

<script src="../prettify/prettify.js"></script>
<script>
  var dojoConfig = {
    async: true,
    packages: [{
      "name": "js",
      "location": location.pathname.replace(/\/[^/]+$/, "/") + "../scripts"
    }]
  };
</script>
<script src="../scripts/libs/tailcoat.js"></script>

<script src="../scripts/libs/dojo-esri/dojo/dojo.js" data-dojo-config="async: true,locale: 'en-us'"></script>
<script src="../scripts/esri-main-concepts.js"></script>

<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJGGV5"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJGGV5');</script>

 



<script type="text/javascript">if (_satellite && _satellite.pageBottom) { _satellite.pageBottom(); }</script>
<script type="text/javascript" src="https://go.pardot.com/dcjs/82202/1182/dc.js"></script>


</body>
</html>
