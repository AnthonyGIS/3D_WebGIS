<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="content-language" content="en">
  <meta name="product" content="js-api-arcgis">
  <meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE">
  <meta name="sub_category" content="JavaScript API">
  <meta name="search-collection" content="help">
  <meta name="search-category" content="help-api,help-api-guide">
  <meta name="version" content="3.x">
  <meta name="content_type" content="Help Topic"> 
  <meta name="last-modified" content="2017-07-03"> 

  <link rel="stylesheet" href="../styles/screen.css">
  <link rel="stylesheet" href="../styles/jsdoc.css">
  <link rel="stylesheet" href="../styles/hljs-github.css">
  <link rel="stylesheet" href="../styles/homepage.css">
  <link rel="stylesheet" href="../styles/grid.css">
  <link rel="stylesheet" href="../styles/tree.css">
  <link rel="stylesheet" href="../prettify/prettify.css">
  <link rel="stylesheet" href="../styles/tailcoat-search.css">
  <link rel="stylesheet" href="//fast.fonts.com/cssapi/23855eec-5fdf-4594-9898-0113a04bfef0.css">
  <link rel="shortcut icon" href="../graphics/favicon.ico">

  <style>
    html {
      overflow-y: auto;
    }
    pre {
      font-size: 1.1em;
      line-height: normal;
      margin: 0;
    }
    #header nav li a {
      font-size: .875em;
    }
    #esri-logo {
      margin-left: 0;
    }
    h1.light {
      color: #fff;
    }
    .navigation-bar {
      background-image: url("../graphics/tailcoat/navigation-bar-background.jpg");
    }
  </style>
  <title>Arcade - expression language | Guide | ArcGIS API for JavaScript 3.21</title>
  
  
<script src="https://assets.adobedtm.com/2e9cd01e19dc5ac4867e752f17a2f1ea1923e5af/satelliteLib-0ed1001fd441a838aefe8e755be42aaafddcc46b.js"></script>


</head>

<body>
<header class="header">
  <div class="container">
    <nav class="site-nav">
        Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a>
    </nav>
  </div>
</header>
          
  <div class="navigation-bar ">  
    <div class="container">
      <header>
        <h1 class="light"><a href="..">ArcGIS API for JavaScript <sup>3.21</sup></a></h1>
      </header>
       <nav class="navigation-bar-nav">
        <ul>
            <li class=""><a href="../">Home</a></li>
            <li class="current"><a href=".">Guide</a></li>
            <li class=""><a href="../jsapi/">API Reference</a></li>
            <li class=""><a href="../jssamples/">Sample Code</a></li>
            <li class=""><a class="icon-share icon-link-external" href="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</a></li>
        </ul>
      </nav>
    </div>
  </div> 

<div class="container_12">
  <div class="grid_3 contentWrapper">
    <div id="toggleToc">
      <img src="../graphics/tochide.gif" alt=""> Hide Table of Contents
    </div>
    <div id="apiToc"><div class="treeDiv" id="tree" style="top: 35px; left: 0px;">
  <div id="treeRoot">
    <div class="treeNode">
      <a class="treeUnselected" href="." onclick="clickAnchor(this)">Overview</a>
    </div>
    <div class="treeNode">
      <a class="treeUnselected" href="whats_new.html" onclick="clickAnchor(this)">What's New in Version 3.21</a>
    </div>
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Tutorials</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="intro_firstmap_amd.html" onclick="clickAnchor(this)">Build your first application</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_agstemplate_amd.html" onclick="clickAnchor(this)">Use an ArcGIS.com webmap</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_dev.html" onclick="clickAnchor(this)">Mobile-specific application</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_directions.html" onclick="clickAnchor(this)">Directions widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="tutorial_search.html" onclick="clickAnchor(this)">Search widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="tutorial_label_layer.html" onclick="clickAnchor(this)">Labeling features client-side</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_javascript_classes.html" onclick="clickAnchor(this)">Write a class</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_custom_dijit.html" onclick="clickAnchor(this)">Create a re-usable widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="tutorial_sharing_maps_secure_layers.html" onclick="clickAnchor(this)">Share maps with secure layers</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">About the API</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="intro_gettingstarted.html" onclick="clickAnchor(this)">Get Started</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_accessapi.html" onclick="clickAnchor(this)">Get the API</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="localization.html" onclick="clickAnchor(this)">Localization</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="css.html" onclick="clickAnchor(this)">Required CSS</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="supported_browsers.html" onclick="clickAnchor(this)">Supported Browsers</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="community.html" onclick="clickAnchor(this)">Community</a>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Dojo
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojo.html" onclick="clickAnchor(this)">Work with Dojo</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojoversion.html" onclick="clickAnchor(this)">Get Dojo</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojodijits.html" onclick="clickAnchor(this)">Dijits</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojo_amd.html" onclick="clickAnchor(this)">Dojo and AMD</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojoLayouts.html" onclick="clickAnchor(this)">Dojo Layouts</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_dojohelp.html" onclick="clickAnchor(this)">Additional resources</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="why_dojo.html" onclick="clickAnchor(this)">Why Dojo?</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        Work with the API
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="inside_defaults.html" onclick="clickAnchor(this)">Default API configurations</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_bundle.html" onclick="clickAnchor(this)">Default API strings</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_esri_request.html" onclick="clickAnchor(this)">Retrieve data from a web server</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_navigation.html" onclick="clickAnchor(this)">Map navigation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_events.html" onclick="clickAnchor(this)">Events</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_extents.html" onclick="clickAnchor(this)">Set Extents</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_editing.html" onclick="clickAnchor(this)">Editing</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="arcade.html" onclick="clickAnchor(this)">Arcade</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_temporal.html" onclick="clickAnchor(this)">Time aware data</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_firsttask.html" onclick="clickAnchor(this)">Adding a task</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_querytask.html" onclick="clickAnchor(this)">Using QueryTask</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_custom_layers.html" onclick="clickAnchor(this)">Creating custom layer types</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_webmap.html" onclick="clickAnchor(this)">Web maps</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_analysiswidgets.html" onclick="clickAnchor(this)">Working with Analysis Widgets</a>
        </div>
        <div class="treeNode">
        <a class="treeUnselected" href="intro_search_widget.html" onclick="clickAnchor(this)">Working with the Search Widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_directions_widget.html" onclick="clickAnchor(this)">Working with the Directions Widget</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_geoenrichment.html" onclick="clickAnchor(this)">Working with GeoEnrichment Widgets</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_datareviewer.html" onclick="clickAnchor(this)">Working with DataReviewer</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="intro_locationproviders.html" onclick="clickAnchor(this)">Location Providers (beta)</a>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Graphics and feature layers</span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="inside_graphics.html" onclick="clickAnchor(this)">Graphics overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_feature_layers.html" onclick="clickAnchor(this)">Feature layer overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_renderers.html" onclick="clickAnchor(this)">Symbols and renderers</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_bettermaps.html" onclick="clickAnchor(this)">Data Visualization</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="inside_styling_svg.html" onclick="clickAnchor(this)">Styling features with CSS</a>
            </div>
          </div>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Popups and Info Windows
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="intro_infowindow.html" onclick="clickAnchor(this)">Info windows and graphics</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_formatinfowindow.html" onclick="clickAnchor(this)">Format info window content</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_customize.html" onclick="clickAnchor(this)">Customize info windows</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_agspopup.html" onclick="clickAnchor(this)">Popup overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_popuptemplate.html" onclick="clickAnchor(this)">Format popup content</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_customizepopup.html" onclick="clickAnchor(this)">Customize popup</a>
            </div>
          </div>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Geoprocessor
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_overview.html" onclick="clickAnchor(this)">Geoprocessing overview</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_creating.html" onclick="clickAnchor(this)">Creating the geoprocessor</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_parameters.html" onclick="clickAnchor(this)">Geoprocessor parameters</a>
            </div>
            <div class="treeNode">
              <a class="treeUnselected" href="intro_gp_running.html" onclick="clickAnchor(this)">Geoprocessing results</a>
            </div>
          </div>
        </div>
        
        <div class="treeNode">
          <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
          <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
            Operations Dashboard
          </span>
          <div class="treeSubnodesHidden">
            <div class="treeNode">
              <a class="treeUnselected" href="operations-dashboard-extensibility-overview.html" onclick="clickAnchor(this)">Overview</a>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Get started
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-getstarted-setup-dev-env.html" onclick="clickAnchor(this)">Set up a development environment</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-getstarted-samples.html" onclick="clickAnchor(this)">Samples</a>
                </div>
              </div>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Create extensions
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-overview.html" onclick="clickAnchor(this)">Overview of widgets, map tools and feature actions</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-widget.html" onclick="clickAnchor(this)">Create a widget</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-maptool.html" onclick="clickAnchor(this)">Create a map tool</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-configurable.html" onclick="clickAnchor(this)">Create a configurable extension</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-create-ext-manifest.html" onclick="clickAnchor(this)">Manifest</a>
                </div>
              </div>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Test and debug
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-test-debug.html" onclick="clickAnchor(this)">Test and debug in Operations Dashboard</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-troubleshooting.html" onclick="clickAnchor(this)">Troubleshooting</a>
                </div>
              </div>
            </div>
            <div class="treeNode">
              <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
              <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
                Deploy
              </span>
              <div class="treeSubnodesHidden">
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-overview.html" onclick="clickAnchor(this)">Overview of deploying extensions</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-setup-web-server.html" onclick="clickAnchor(this)">Set up a web server</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-register-ext.html" onclick="clickAnchor(this)">Register an extension</a>
                </div>
                <div class="treeNode">
                  <a class="treeUnselected" href="operations-dashboard-extensibility-deploy-update-ext.html" onclick="clickAnchor(this)">Update an extension</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">Mobile</span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_viewport.html" onclick="clickAnchor(this)">Viewport Settings</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_hardware.html" onclick="clickAnchor(this)">Device Detection and Browser Sniffing</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_orientation.html" onclick="clickAnchor(this)">Device Orientation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_geolocation.html" onclick="clickAnchor(this)">Geolocation</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_frameworks.html" onclick="clickAnchor(this)">Frameworks</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_phonegap.html" onclick="clickAnchor(this)">Using PhoneGap</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="mobile_references.html" onclick="clickAnchor(this)">References</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        ArcGIS Server Services
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="ags_overview.html" onclick="clickAnchor(this)">Overview</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_rest.html" onclick="clickAnchor(this)">Services directory and the REST API</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_secureservices.html" onclick="clickAnchor(this)">Working with secure resources</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ags_proxy.html" onclick="clickAnchor(this)">Using the proxy page</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        References
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="inside_web_optimizer.html" onclick="clickAnchor(this)">Using the Web Optimizer</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_bower_custom_builds.html" onclick="clickAnchor(this)">Using Bower for Custom Builds</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="limits_for_graphics.html" onclick="clickAnchor(this)">Determine limits for map graphics</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="best_practices_feature_layers.html" onclick="clickAnchor(this)">Feature layer best practices</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_guidelines.html" onclick="clickAnchor(this)">Coding guidelines</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="ref_coordsystems.html" onclick="clickAnchor(this)">Coordinate system IDs</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="inside_faq.html" onclick="clickAnchor(this)">Frequently asked questions</a>
        </div>
      </div>
    </div>
    
    
    <div class="treeNode">
      <img class="treeLinkImage" onclick="expandCollapse(this.parentNode)" src="../graphics/treenodeplus.gif" alt=""/>
      <span onclick="expandCollapse(this.parentNode)" style="cursor: pointer;">
        What's New archive
      </span>
      <div class="treeSubnodesHidden">
        <div class="treeNode">
          <a class="treeUnselected" href="migration_30.html" onclick="clickAnchor(this)">Migrating to 3.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="migration_20.html" onclick="clickAnchor(this)">Migrating to 2.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v319.html" onclick="clickAnchor(this)">What's New in Version 3.20</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v319.html" onclick="clickAnchor(this)">What's New in Version 3.19</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v318.html" onclick="clickAnchor(this)">What's New in Version 3.18</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v317.html" onclick="clickAnchor(this)">What's New in Version 3.17</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v316.html" onclick="clickAnchor(this)">What's New in Version 3.16</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v315.html" onclick="clickAnchor(this)">What's New in Version 3.15</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v314.html" onclick="clickAnchor(this)">What's New in Version 3.14</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v313.html" onclick="clickAnchor(this)">What's New in Version 3.13</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v312.html" onclick="clickAnchor(this)">What's New in Version 3.12</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v311.html" onclick="clickAnchor(this)">What's New in Version 3.11</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v310.html" onclick="clickAnchor(this)">What's New in Version 3.10</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v39.html" onclick="clickAnchor(this)">What's New in Version 3.9</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v38.html" onclick="clickAnchor(this)">What's New in Version 3.8</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v37.html" onclick="clickAnchor(this)">What's New in Version 3.7</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v36.html" onclick="clickAnchor(this)">What's New in Version 3.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v35.html" onclick="clickAnchor(this)">What's New in Version 3.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v34.html" onclick="clickAnchor(this)">What's New in Version 3.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v33.html" onclick="clickAnchor(this)">What's New in Version 3.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v32.html" onclick="clickAnchor(this)">What's New in Version 3.2</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v31.html" onclick="clickAnchor(this)">What's New in Version 3.1</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v30.html" onclick="clickAnchor(this)">What's New in Version 3.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v28.html" onclick="clickAnchor(this)">What's New in Version 2.8</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v27.html" onclick="clickAnchor(this)">What's New in Version 2.7</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v26.html" onclick="clickAnchor(this)">What's New in Version 2.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v25.html" onclick="clickAnchor(this)">What's New in Version 2.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v24.html" onclick="clickAnchor(this)">What's New in Version 2.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v23.html" onclick="clickAnchor(this)">What's New in Version 2.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v22.html" onclick="clickAnchor(this)">What's New in Version 2.2</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v21.html" onclick="clickAnchor(this)">What's New in Version 2.1</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v20.html" onclick="clickAnchor(this)">What's New in Version 2.0</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v16.html" onclick="clickAnchor(this)">What's New in Version 1.6</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v15.html" onclick="clickAnchor(this)">What's New in Version 1.5</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v14.html" onclick="clickAnchor(this)">What's New in Version 1.4</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v13.html" onclick="clickAnchor(this)">What's New in Version 1.3</a>
        </div>
        <div class="treeNode">
          <a class="treeUnselected" href="new_v12.html" onclick="clickAnchor(this)">What's New in Version 1.2</a>
        </div>
      </div>
    </div>
    
  </div>
</div></div> 
  </div>
  <div class="grid_9 contentWrapper">
    <div id="topicPane"><div id="pageBanner">Arcade - expression language</div>
<div id="nstext">


<h2 id="overview">Overview</h2>

<p>Arcade is a lightweight and secure expression language written for use in the ArcGIS platform. Like other expression languages, it can perform mathematical calculations and evaluate logical statements. It was designed specifically for creating custom visualizations and labeling expressions in the ArcGIS Platform, allowing users to write, share, and execute custom expressions in <a href="http://www.esri.com/en/software/arcgis-pro">ArcGIS Pro</a>, <a href="https://arcgis.com">ArcGIS Online</a>, the <a href="https://developers.arcgis.com/arcgis-runtime/">ArcGIS Runtime APIs</a>, and the ArcGIS API for JavaScript.</p>

<p>What makes Arcade particularly unique to other expression and scripting languages is its inclusion of geometry functions. In the initial release of Arcade, geometries can be created and referenced. In future releases, other geometry functions may be added allowing you to calculate areas and lengths, and perform simple overlay operations in more complex expressions.</p>

<a name="syntax"></a>
<h2 id="syntax">Syntax</h2>

<p>In many respects Arcade's syntax is similar to JavaScript, allowing you to declare variables, perform logical operations, take advantage of built-in functions, and write custom functions. However, there are key differences between the two languages. Read the full <a href="https://developers.arcgis.com/arcade/">Arcade documentation</a> including <a href="https://developers.arcgis.com/arcade/guide/">guides</a> and the <a href="https://developers.arcgis.com/arcade/function-reference/">function reference</a> for more details on how to write an Arcade expression. You also have access to a <a href="https://developers.arcgis.com/arcade/playground/">playground</a> that provides an environment for testing custom scripts based on your data.</p>

<p>The power of Arcade is manifest in gaining access to global variables. Global variables contain external values that are passed to a script during its execution – based on the execution <a href="#profiles">profile</a>.</p>

<p>The <code>$feature</code> global variable allows you to access field values for features in a FeatureLayer. Each field value is also considered a global variable. Field values are referenced using the following syntax:</p>

<pre class="prettyprint"><code class="js">$feature.fieldName</code></pre>

<p>This makes it easy to perform simple calculations using field values at runtime.</p>

<pre class="prettyprint"><code>// calculates the % of voters who voted for a
// democratic candidate
($feature.DEM_VOTES / $feature.TURNOUT ) * 100
</code></pre>

<p>Arcade is only executed within the context, or <a href="#profiles">profile</a>, in which it is understood. Within JavaScript apps, Arcade expressions are always referenced as a string value. You may use Arcade to write simple single-line expressions, or more complex multi-line epxressions.</p>

<p>When writing single-line expressions, you can simply wrap it in double or single quotes.</p>

<pre class="prettyprint"><code>renderer.valueExpression = "Round( ($feature.AGE_18UP / $feature.TOTAL_POP) * 100 )";
</code></pre>

<p>When writing multi-line expressions, we recommend you place it in a separate <strong><code>script</code></strong> tag outside the JavaScript portion of the app, and set the type to <strong><code>text/plain</code></strong> with a unique ID you can use to reference the script in the appropriate place within JavaScript.</p>

<pre class="prettyprint"><code>&#60;script type="text/plain" id="adult-population">
  // place multi-line Arcade expression here
&#60;/script>
</code></pre>

<p>Then you can refrence the script as a string value by calling the <strong><code>document.getElementById()</code></strong> method.</p>

<pre class="prettyprint"><code>renderer.valueExpression = document.getElementById("adult-population").text;
</code></pre>

<p>See the example snippets below and the <a href="../jssamples/renderer_arcade.html">Create a renderer using Arcade sample</a> sample for more context.</p>

<br>
<a name="profiles"></a>
<h2 id="profiles">Profiles</h2>

<p>Arcade was designed for use in several profiles. A profile is a context in which the expression is understood and used. In the ArcGIS API 3.21 for JavaScript, Arcade supports three profiles: <a href="#visualization">visualization</a>, <a href="#labeling">labeling</a>, and <a href="#popups">popups</a></p>

<a name="visualization"></a>
<h3 id="visualization">Visualization</h3>

<p>In the visualization profile, Arcade allows you to calculate values for each feature in a <a href="../jsapi/featurelayer-amd.html">FeatureLayer</a> at runtime and use those values as the basis for a data-driven visualization. This is an alternative approach to creating data-driven visualizations based on a single field value in the layer. To accomplish this, an Arcade expression may be passed to the <code>valueExpression</code> property  in <a href="../jsapi/classbreaksrenderer-amd.html">ClassBreaksRenderer</a>, <a href="../jsapi/uniquevaluerenderer-amd.html">UniqueValueRenderer</a> or any of the visual variables: <a href="../jsapi/renderer-amd.html#colorinfo">color</a>, <a href="../jsapi/renderer-amd.html#sizeinfo">size</a>, <a href="../jsapi/renderer-amd.html#opacityinfo">opacity</a>, and <a href="../jsapi/renderer-amd.html#rotationinfo">rotation</a> instead of referencing a <code>field</code>/<code>normalizationField</code> or a JavaScript function.</p>

<div class="esri-md panel trailer-1">

<p>Arcade supports creating visualizations for <a href="../jsapi/featurelayer-amd.html">FeatureLayer</a> only. Other layer types that accept <a href="../jsapi/classbreaksrenderer-amd.html">ClassBreaksRenderer</a> and <a href="../jsapi/uniquevaluerenderer-amd.html">UniqueValueRenderer</a>, such as <a href="../jsapi/arcgisdynamicmapservicelayer-amd.html">ArcGISDynamicMapServiceLayer</a>, do not support Arcade.</p>

</div>

<p>When used in a ClassBreaksRenderer or any of the visual variables, the expression must evaluate to a number. Expressions may evaluate to either strings or numbers in UniqueValueRenderer.</p>

<p>In the example below, an Arcade expression is used in the <a href="../jsapi/uniquevaluerenderer-amd.html#valueexpression">valueExpression</a> property of a UniqueValueRenderer. In this case, we are creating a visualization for a FeatureLayer representing U.S. counties. The service has three fields that identify the number of republicans, democrats, and independent/non-party voters in each county. We would like to visualize each county based on which party outnumbers the others. Since the service does not contain a field indicating the predominant party, we can write an Arcade expression to identify that for each feature.</p>

<p>First, write the Arcade expression in a script tag with a unique ID.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;"><span
 style="color: #000080; font-weight: normal;">&lt;<span
 style="color: #000080; font-weight: normal;">script</span> <span
 style="color: #008080;">type</span>=<span
 style="color: #d14;">"text/plain"</span> <span
 style="color: #008080;">id</span>=<span
 style="color: #d14;">"winning-party"</span>&gt;</span><span
>
  <span
 style="color: #998; font-style: italic;">// store field values in variables with</span>
  <span
 style="color: #998; font-style: italic;">// meaningful names. Each is the total count </span>
  <span
 style="color: #998; font-style: italic;">// of votes for the respective party</span>

  <span
 style="color: #333; font-weight: bold;">var</span> republican = $feature.MP06025a_B;
  <span
 style="color: #333; font-weight: bold;">var</span> democrat = $feature.MP06024a_B;
  <span
 style="color: #333; font-weight: bold;">var</span> independent = $feature.MP06026a_B;
  <span
 style="color: #333; font-weight: bold;">var</span> parties = [republican, democrat, independent];

  <span
 style="color: #998; font-style: italic;">// Match the maximum value with the label </span>
  <span
 style="color: #998; font-style: italic;">// of the respective field and return it for</span>
  <span
 style="color: #998; font-style: italic;">// use in a UniqueValueRenderer</span>

  <span
 style="color: #333; font-weight: bold;">return</span> Decode( Max(parties),
    republican, <span
 style="color: #d14;">'republican'</span>,
    democrat, <span
 style="color: #d14;">'democrat'</span>,
    independent, <span
 style="color: #d14;">'independent'</span>,
    <span
 style="color: #d14;">'n/a'</span> );
</span><span
 style="color: #000080; font-weight: normal;">&lt;/<span
 style="color: #000080; font-weight: normal;">script</span>&gt;</span>
</code></pre>

<p>Then reference the script as a string value using <strong><code>document.getElementById()</code></strong> within the appropriate <strong><code>valueExpression</code></strong> property in the JavaScript.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;"><span
 style="color: #998; font-style: italic;">// Assign the expression to the `valueExpression` property and</span>
<span
 style="color: #998; font-style: italic;">// set up the unique value infos based on the decode values</span>
<span
 style="color: #998; font-style: italic;">// you set up in the expression.</span>

<span
 style="color: #333; font-weight: bold;">var</span> winnerArcade = <span
 style="color: #0086b3;">document</span>.getElementById(<span
 style="color: #d14;">"winning-party"</span>).text;

<span
 style="color: #333; font-weight: bold;">var</span> renderer = <span
 style="color: #333; font-weight: bold;">new</span> UniqueValueRenderer({
  valueExpression: winnerArcade,
  valueExpressionTitle: <span
 style="color: #d14;">"Counties by dominant party among registered voters"</span>,
  uniqueValueInfos: [{
    value: <span
 style="color: #d14;">"democrat"</span>,
    symbol: createSymbol(<span
 style="color: #d14;">"#00c3ff"</span>),
    label: <span
 style="color: #d14;">"Democrat"</span>
  }, {
    value: <span
 style="color: #d14;">"republican"</span>,
    symbol: createSymbol(<span
 style="color: #d14;">"#ff002e"</span>),
    label: <span
 style="color: #d14;">"Republican"</span>
  }, {
    value: <span
 style="color: #d14;">"independent"</span>,
    symbol: createSymbol(<span
 style="color: #d14;">"#faff00"</span>),
    label: <span
 style="color: #d14;">"Independent/non-affiliated"</span>
  }]
});
</code></pre>

<p>You can also add an opacity visual variable to the renderer to visualize the relative strength of the predominant party in each county. Counties where more people come from a single party will be drawn with high opacity, while those where the proportion of people from each party are relatively equal will be drawn with low opacity.</p>

<p>First, write the expression in a <strong><code>&#60;script></code></strong> tag.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;"><span
 style="color: #000080; font-weight: normal;">&lt;<span
 style="color: #000080; font-weight: normal;">script</span> <span
 style="color: #008080;">type</span>=<span
 style="color: #d14;">"text/plain"</span> <span
 style="color: #008080;">id</span>=<span
 style="color: #d14;">"strength"</span>&gt;</span><span
>
  <span
 style="color: #998; font-style: italic;">// Write the expression and reference the value</span>
  <span
 style="color: #998; font-style: italic;">// of each field with a meaningful variable name within</span>
  <span
 style="color: #998; font-style: italic;">// the expression. Then calculate the max number with</span>
  <span
 style="color: #998; font-style: italic;">// the Max() function and the total using Sum().</span>
  <span
 style="color: #998; font-style: italic;">// Calculate the share of the max population within the</span>
  <span
 style="color: #998; font-style: italic;">// county. This value will be between 33 - 100 and will</span>
  <span
 style="color: #998; font-style: italic;">// be used to determine the feature's opacity.</span>
  <span
 style="color: #998; font-style: italic;">// Note the value is explicitly returned; it could also</span>
  <span
 style="color: #998; font-style: italic;">// be implicitly returned like the previous example</span>

  <span
 style="color: #333; font-weight: bold;">var</span> republican = $feature.MP06025a_B;
  <span
 style="color: #333; font-weight: bold;">var</span> democrat = $feature.MP06024a_B;
  <span
 style="color: #333; font-weight: bold;">var</span> independent = $feature.MP06026a_B;
  <span
 style="color: #333; font-weight: bold;">var</span> parties = [republican, democrat, independent];
  <span
 style="color: #333; font-weight: bold;">var</span> total = Sum(parties);
  <span
 style="color: #333; font-weight: bold;">var</span> max = Max(parties);

  <span
 style="color: #333; font-weight: bold;">return</span> (max / total) * <span
 style="color: #008080;">100</span>;
</span><span
 style="color: #000080; font-weight: normal;">&lt;/<span
 style="color: #000080; font-weight: normal;">script</span>&gt;</span>
</code></pre>

<p>Then reference it in JavaScript as a string value.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;"><span
 style="color: #998; font-style: italic;">// Assign the expression to the `valueExpression` property and</span>
<span
 style="color: #998; font-style: italic;">// set up the unique value infos based on the decode values</span>
<span
 style="color: #998; font-style: italic;">// you set up in the expression.</span>

<span
 style="color: #333; font-weight: bold;">var</span> strengthArcade = <span
 style="color: #0086b3;">document</span>.getElementById(<span
 style="color: #d14;">"strength"</span>).text;

<span
 style="color: #333; font-weight: bold;">var</span> opacityVV = {
  type: <span
 style="color: #d14;">"opacityInfo"</span>,
  valueExpression: strengthArcade,
  stops: [
    { value: <span
 style="color: #008080;">33</span>, opacity: <span
 style="color: #008080;">0.1</span> },
    { value: <span
 style="color: #008080;">50</span>, opacity: <span
 style="color: #008080;">1.0</span> }
  ]
};

<span
 style="color: #998; font-style: italic;">// Add the visual variable to the renderer</span>

renderer.setVisualVariables([ opacityVV ]);
</code></pre>

<p>Note that if Arcade expressions are set on a layer's renderer <strong>after</strong> it loads, the fields referenced in the expression must be manually included in the layer's <a href="../jsapi/featurelayer-amd.html#featurelayer1">outFields</a>. However, if a renderer uses an Arcade expression and is set within a layer's constructor, then the fields referenced in the expression are automatically included in a layer's <a href="../jsapi/featurelayer-amd.html#featurelayer1">outFields</a>.</p>

<p>View the <a href="../jssamples/renderer_arcade.html">Create a renderer using Arcade sample</a> to see this example in context.</p>

<a name="labeling"></a>
<h3>Labeling</h3>

<p>Arcade may also be used to create label expressions for features in a FeatureLayer. Starting at version 3.19 of the API, this is the only supported method for labeling features.</p>

<p>As is the case with labeling in previous versions of the API, you must add at least one <a href="../jsapi/labelclass-amd.html">LabelClass</a> to the <a href="../jsapi/featurelayer-amd.html#labelinginfo">labelingInfo</a> property of the <a href="../jsapi/featurelayer-amd.html">FeatureLayer</a> and set the <code>showLabels</code> constructor parameter of <a href="../jsapi/map-amd.html">Map</a> to true. The Arcade expression must be passed as a string value to the expression property of the LabelClass's labelExpressionInfo object.</p>

<pre class="prettyprint"><code>// returns the value of a field in the layer
// the value of this field will be the label for each feature
var arcade = "$feature.STATION_NAME";

// set the arcade expression to the `expression` property of labelExpressionInfo
var labelClass = new LabelClass({
  labelExpressionInfo: {
    expression: arcade
  },
  labelPlacement: "below-right",
  minScale: 2500000
});
nameClass.symbol = new TextSymbol();

// set the label class to the feature layer
featureLayer.setLabelingInfo([ labelClass ]);
</code></pre>

<p>Label expressions written in Arcade may be more complex, containing multiple lines that perform mathematical and logical operations. For example, the <a href="../jssamples/labels_arcade.html">Label features using Arcade expressions sample</a> contains four different Arcade expressions with various levels of complexity. One of them simply returns a field value as demonstrated in the example snippet above. Two others return field values with additional text appended.</p>

<pre class="prettyprint"><code>// returns the value of the TEMP field and concatenates it with the temperature units
// the value of TEMP is a number that is implicitly converted to a string
$feature.TEMP + '° F';
</code></pre>

<p>Finally, another expression used in the sample (shown below) demonstrates a more complex multi-line label expression. This expression assigns two numeric field values to their own variables and evaluates them to return a string value. Arcade's <a href="https://developers.arcgis.com/arcade/function-reference/logical_functions#when">When() function</a> is used to evaluate the wind direction (between 0-360 degrees) and return the associated compass direction of either N, NE, E, SE, S, SW, W, or NW. If the wind speed is 0, then no direction is returned. The final line of the expression returns the label, which is the value of the WIND variable.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;"><span
 style="color: #000080; font-weight: normal;">&lt;<span
 style="color: #000080; font-weight: normal;">script</span> <span
 style="color: #008080;">type</span>=<span
 style="color: #d14;">"text/plain"</span> <span
 style="color: #008080;">id</span>=<span
 style="color: #d14;">"wind-direction"</span>&gt;</span><span
>
  var DEG = $feature.WIND_DIRECT;
  var SPEED = $feature.WIND_SPEED;
  var DIR = When( SPEED == 0, null,
    (DEG &amp;#60; 22.5 &amp;&amp; DEG &gt;= 0) || DEG &gt; 337.5, 'N',
     DEG &gt;= 22.5 &amp;&amp; DEG &amp;#60; 67.5, 'NE',
     DEG &gt;= 67.5 &amp;&amp; DEG &amp;#60; 112.5, 'E',
     DEG &gt;= 112.5 &amp;&amp; DEG &amp;#60; 157.5, 'SE',
     DEG &gt;= 157.5 &amp;&amp; DEG &amp;#60; 202.5, 'S',
     DEG &gt;= 202.5 &amp;&amp; DEG &amp;#60; 247.5, 'SW',
     DEG &gt;= 247.5 &amp;&amp; DEG &amp;#60; 292.5, 'W',
     DEG &gt;= 292.5 &amp;&amp; DEG &amp;#60; 337.5, 'NW', null );
  var WIND = SPEED + ' mph ' + DIR;
  return WIND;
</span><span
 style="color: #000080; font-weight: normal;">&lt;/<span
 style="color: #000080; font-weight: normal;">script</span>&gt;</span>
</code></pre>

<p>There are many additional functions useful for labeling, inluding <a href="https://developers.arcgis.com/arcade/function-reference/text_functions/">text functions</a> that provide logic for text formatting. Be sure to check out the full <a href="https://developers.arcgis.com/arcade/">Arcade documentation</a> for more information regarding these built-in functions. Also, be sure to take advantage of the <a href="https://developers.arcgis.com/arcade/playground/">Arcade playground</a>. This app allows you to build, debug, and test an Arcade expression within a browser based on field values imported from an input feature service. It also includes the ability to debug complex scripts with a <a href="https://developers.arcgis.com/arcade/function-reference/text_functions/#Console">Console</a> function.</p>

<p>Note that field names referenced in Arcade expressions within a layer's labelingInfo must be manually included in the layer's <a href="../jsapi/featurelayer-amd.html#featurelayer1">outFields</a>.</p>


<a name="popups"></a>
<h3 id="popups">Popups</h3>

<p>Arcade expressions can also be referenced within the <a href="../jsapi/popuptemplate-amd.html#popuptemplate1">description</a> of a <a href="../jsapi/popuptemplate-amd.html">PopupTemplate</a>. Similar to the <a href="#visualization">visualization</a> profile, this is useful for situations when you want to display data that isn't present as an attribute value in your <a href="../jsapi/featurelayer-amd.html">FeatureLayer</a> instance.</p>

<p>For example, the <a href="../jssamples/popup_arcade.html">Reference Arcade expressions in PopupTemplate</a> sample displays a layer containing labor statistics for each U.S. county. Some attributes include unemployment rate, population, and the number of people participating in the labor force. It does not have an attribute for labor force participation rate. We can use Arcade to calculate that for us at runtime.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;"><span
 style="color: #998; font-style: italic;">// labor force participation rate</span>
Round(($feature.CIVLBFR_CY / $feature.POP_16UP)*<span
 style="color: #008080;">100</span>,<span
 style="color: #008080;">2</span>)
</code></pre>

<p>The values returned from this expression can be used to visualize the layer and/or displayed in the layer's <a href="../jsapi/featurelayer-amd.html#infotemplate">infoTemplate</a>. To view the value in the popup, we must reference it in the <a href="../jsapi/popuptemplate-amd.html#expressioninfos">expressionInfos</a> property of the PopupTemplate and assign it a <b>name</b> and a <b>title</b>.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;">layer.setInfoTemplate(<span
 style="color: #333; font-weight: bold;">new</span> PopupTemplate({
  expressionInfos: [{
    name: <span
 style="color: #d14;">"participation-rate"</span>,
    title: <span
 style="color: #d14;">"% of population 16+ participating in the labor force"</span>,
    expression: <span
 style="color: #d14;">"Round(($feature.CIVLBFR_CY / $feature.POP_16UP)*100,2)"</span>
  }],
  description: <span
 style="color: #d14;">"In {NAME} county, {expression/participation-rate}% of the population"</span>
    + <span
 style="color: #d14;">" participates in the labor force."</span>
}));
</code></pre>

<p>Notice that once the expression exists in the <b>expressionInfos</b> property, you can reference the value returned from the expression using the <b>{expession/expression-name}</b> placeholder template within the description of the PopupTemplate. This results in the Popup's content displaying the following:</p>

<img src="images/arcade-popup-text.png" alt="Values from Arcade can be viewed in a popup"/>

<p>You can also reference values returned from Arcade expressions inside the <b>fieldInfos</b> property of the PopupTemplate to format the value. Just reference the name of the expression in the fieldName property of the object. Remember to use the <b>expression/expression-name</b> syntax.</p>

<pre class="prettyprint"><code
 style="display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; -webkit-text-size-adjust: none;">layer.setInfoTemplate(<span
 style="color: #333; font-weight: bold;">new</span> PopupTemplate({
  expressionInfos: [{
    name: <span
 style="color: #d14;">"participation-rate"</span>,
    title: <span
 style="color: #d14;">"% of population 16+ participating in the labor force"</span>,
    expression: <span
 style="color: #d14;">"Round(($feature.CIVLBFR_CY / $feature.POP_16UP)*100,2)"</span>
  }],
  fieldInfos: [{
    fieldName: <span
 style="color: #d14;">"expression/participation-rate"</span>,
    format: {
      places: <span
 style="color: #008080;">2</span>
    }
  }]
}));
</code></pre>

<p>View the <a href="../jssamples/popup_arcade.html">Reference Arcade expressions in PopupTemplate</a> sample to see this workflow in the context of a live sample application.</p>



</div> <div id="wh_footer" class="footnote">
  <!--<a href="mailto:js_feedback@esri.com?subject=Feedback%20on%203.21%20Guide:%20jshelp/arcade.html">Report an error on this page</a>.
  <br>-->
  <a href="http://www.esri.com/legal/copyright-trademarks">Copyright &copy; 2017 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="https://developers.arcgis.com/en/terms/faq/">Terms of use</a>
</div>
</div> 
  </div>
</div> 


<script src="../scripts/tree.js"></script>

<script src="../prettify/prettify.js"></script>
<script>
  var dojoConfig = {
    async: true,
    packages: [{
      "name": "js",
      "location": location.pathname.replace(/\/[^/]+$/, "/") + "../scripts"
    }]
  };
</script>
<script src="../scripts/libs/tailcoat.js"></script>

<script src="../scripts/libs/dojo-esri/dojo/dojo.js" data-dojo-config="async: true,locale: 'en-us'"></script>
<script src="../scripts/esri-main-concepts.js"></script>

<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJGGV5"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJGGV5');</script>

 



<script type="text/javascript">if (_satellite && _satellite.pageBottom) { _satellite.pageBottom(); }</script>
<script type="text/javascript" src="https://go.pardot.com/dcjs/82202/1182/dc.js"></script>


</body>
</html>
